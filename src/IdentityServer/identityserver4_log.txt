2019-02-12 16:16:15.328 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 16:16:16.125 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 16:16:16.125 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 16:16:16.125 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 16:16:16.125 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 16:16:16.125 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 16:16:16.125 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 16:16:16.410 +07:00 [DBG] Starting grant removal
2019-02-12 16:16:16.900 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 16:16:16.906 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 16:16:16.906 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 16:16:16.906 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 16:16:16.906 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 16:16:16.907 +07:00 [DBG] Error Url: /home/error
2019-02-12 16:16:16.907 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 16:16:21.196 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:16:21.239 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:16:21.239 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:16:21.248 +07:00 [DBG] Start discovery request
2019-02-12 16:16:33.451 +07:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server 'khang-pc\sqlexpress'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:e9e94943-4cb6-4301-9fd3-b2a71f925459
Error Number:4060,State:1,Class:11
2019-02-12 16:16:33.510 +07:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:e9e94943-4cb6-4301-9fd3-b2a71f925459
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:e9e94943-4cb6-4301-9fd3-b2a71f925459
Error Number:4060,State:1,Class:11
2019-02-12 16:16:33.568 +07:00 [INF] {"Details":"System.Data.SqlClient.SqlException (0x80131904): Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'KHANG-PC\\trinh'.\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)\r\n   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)\r\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync() in C:\\local\\identity\\server4\\EntityFramework.Storage\\src\\Stores\\ResourceStore.cs:line 138\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Extensions\\IResourceStoreExtensions.cs:line 105\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri) in C:\\local\\identity\\server4\\IdentityServer4\\src\\ResponseHandling\\Default\\DiscoveryResponseGenerator.cs:line 169\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\DiscoveryEndpoint.cs:line 58\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:e9e94943-4cb6-4301-9fd3-b2a71f925459\r\nError Number:4060,State:1,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'KHANG-PC\\trinh'.","ActivityId":"0HLKGPAV17T44:00000002","TimeStamp":"2019-02-12T09:16:33.0000000Z","ProcessId":9208,"LocalIpAddress":"127.0.0.1:11227","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-02-12 16:16:33.583 +07:00 [FTL] Unhandled exception: Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync() in C:\local\identity\server4\EntityFramework.Storage\src\Stores\ResourceStore.cs:line 138
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store) in C:\local\identity\server4\IdentityServer4\src\Extensions\IResourceStoreExtensions.cs:line 105
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\DiscoveryResponseGenerator.cs:line 169
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\DiscoveryEndpoint.cs:line 58
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:e9e94943-4cb6-4301-9fd3-b2a71f925459
Error Number:4060,State:1,Class:11
2019-02-12 16:16:59.608 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:16:59.611 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:16:59.611 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:16:59.611 +07:00 [DBG] Start discovery request
2019-02-12 16:16:59.817 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:17:15.387 +07:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-02-12 16:17:23.738 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:17:23.738 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:17:23.739 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:17:23.739 +07:00 [DBG] Start discovery request
2019-02-12 16:17:23.754 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:19:35.232 +07:00 [DBG] Stopping grant removal
2019-02-12 16:19:35.235 +07:00 [DBG] TaskCanceledException. Exiting.
2019-02-12 16:25:54.504 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 16:25:54.750 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 16:25:54.751 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 16:25:54.751 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 16:25:54.751 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 16:25:54.751 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 16:25:54.751 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 16:25:54.937 +07:00 [DBG] Starting grant removal
2019-02-12 16:25:55.415 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 16:25:55.422 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 16:25:55.422 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 16:25:55.422 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 16:25:55.422 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 16:25:55.422 +07:00 [DBG] Error Url: /home/error
2019-02-12 16:25:55.423 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 16:25:55.481 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:25:55.521 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:25:55.522 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:25:55.527 +07:00 [DBG] Start discovery request
2019-02-12 16:25:56.705 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:25:56.949 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 16:25:56.951 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 16:25:56.953 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 16:25:56.962 +07:00 [DBG] Start key discovery request
2019-02-12 16:25:57.329 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 16:25:57.340 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 16:25:57.340 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 16:25:57.352 +07:00 [DBG] Start token request.
2019-02-12 16:25:57.364 +07:00 [DBG] Start client validation
2019-02-12 16:25:57.376 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 16:25:57.382 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 16:25:57.407 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 16:25:57.407 +07:00 [DBG] Secret id found: client
2019-02-12 16:25:57.644 +07:00 [DBG] client found in database: false
2019-02-12 16:25:57.671 +07:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Unknown client","ActivityId":"0HLKGPGBE7CTU:00000003","TimeStamp":"2019-02-12T09:25:57.0000000Z","ProcessId":26064,"LocalIpAddress":"127.0.0.1:36298","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-02-12 16:25:57.684 +07:00 [ERR] No client with id 'client' found. aborting
2019-02-12 16:26:25.844 +07:00 [DBG] Stopping grant removal
2019-02-12 16:26:25.849 +07:00 [DBG] TaskCanceledException. Exiting.
2019-02-12 16:26:34.733 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 16:26:34.975 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 16:26:34.975 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 16:26:34.975 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 16:26:34.975 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 16:26:34.975 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 16:26:34.975 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 16:26:35.169 +07:00 [DBG] Starting grant removal
2019-02-12 16:26:35.587 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 16:26:35.591 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 16:26:35.591 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 16:26:35.591 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 16:26:35.591 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 16:26:35.591 +07:00 [DBG] Error Url: /home/error
2019-02-12 16:26:35.591 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 16:26:35.640 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:26:35.666 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:26:35.666 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:26:35.675 +07:00 [DBG] Start discovery request
2019-02-12 16:26:36.815 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:26:37.049 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 16:26:37.052 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 16:26:37.052 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 16:26:37.063 +07:00 [DBG] Start key discovery request
2019-02-12 16:26:37.174 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 16:26:37.195 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 16:26:37.195 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 16:26:37.204 +07:00 [DBG] Start authorize request
2019-02-12 16:26:37.222 +07:00 [DBG] No user present in authorize request
2019-02-12 16:26:37.231 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 16:26:37.515 +07:00 [DBG] mvc found in database: false
2019-02-12 16:26:37.547 +07:00 [ERR] Unknown client or not enabled: mvc
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855603971377953.MDM5YmFmZDEtN2IwMS00MzY2LThjZmYtZGY5YmIzYWIwMDUwOGE5N2UyYjQtZmMzYi00MmQxLTkzYjctNzY5MDZlNDMxZDQ1","state":"CfDJ8ARls4BL525HuATxHrUa137g63r8bGDL6XS3ReHKbRLrh03AoiQ_7p4sSbhuqetiYMj87oaVguYxCkgnNhwz2sg_6kcoJVpdB1jyHU0HPsvsVvqak0deA_nZmkXFrpIy3au3YLiUZQGLS0bC6ZLpppg6dNNaa0JJsOVgtXYcfp165oZN9zJyetkKtOSs8r62qULXO1Qj4KlU3-99WQ_gcB4Ng-y-2FXwsJdwR2kCJfxiQfHLAx0k7-lYYFkHlZd00fSCl_Z_nH977ZkygQUf0WvEb3CB9O2NdKIRdRiT9vNXNT4PH0n0gC_N-8uBW4fGQmx-NnCWvRN40GEi3cHwfNQ","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:26:37.577 +07:00 [ERR] Request validation failed
2019-02-12 16:26:37.578 +07:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855603971377953.MDM5YmFmZDEtN2IwMS00MzY2LThjZmYtZGY5YmIzYWIwMDUwOGE5N2UyYjQtZmMzYi00MmQxLTkzYjctNzY5MDZlNDMxZDQ1","state":"CfDJ8ARls4BL525HuATxHrUa137g63r8bGDL6XS3ReHKbRLrh03AoiQ_7p4sSbhuqetiYMj87oaVguYxCkgnNhwz2sg_6kcoJVpdB1jyHU0HPsvsVvqak0deA_nZmkXFrpIy3au3YLiUZQGLS0bC6ZLpppg6dNNaa0JJsOVgtXYcfp165oZN9zJyetkKtOSs8r62qULXO1Qj4KlU3-99WQ_gcB4Ng-y-2FXwsJdwR2kCJfxiQfHLAx0k7-lYYFkHlZd00fSCl_Z_nH977ZkygQUf0WvEb3CB9O2NdKIRdRiT9vNXNT4PH0n0gC_N-8uBW4fGQmx-NnCWvRN40GEi3cHwfNQ","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:26:37.607 +07:00 [INF] {"ClientId":"mvc","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGPGNDVDT6:00000003","TimeStamp":"2019-02-12T09:26:37.0000000Z","ProcessId":26008,"LocalIpAddress":"127.0.0.1:30009","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 16:27:18.012 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 16:27:18.317 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 16:27:18.318 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 16:27:18.318 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 16:27:18.318 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 16:27:18.318 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 16:27:18.318 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 16:27:18.565 +07:00 [DBG] Starting grant removal
2019-02-12 16:27:19.133 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 16:27:19.139 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 16:27:19.139 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 16:27:19.139 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 16:27:19.142 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 16:27:19.142 +07:00 [DBG] Error Url: /home/error
2019-02-12 16:27:19.142 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 16:27:24.755 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 16:27:24.783 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 16:27:24.784 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 16:27:24.790 +07:00 [DBG] Start authorize request
2019-02-12 16:27:24.803 +07:00 [DBG] No user present in authorize request
2019-02-12 16:27:24.812 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 16:27:25.901 +07:00 [DBG] mvc found in database: false
2019-02-12 16:27:25.938 +07:00 [ERR] Unknown client or not enabled: mvc
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855604447289457.NzE1NjNiNmQtYzc1Yy00YTdhLWFhZWQtYTY3NWRhNjhhYjY3MmJhYjE0NjUtODRmNS00NTA2LWIyYTEtYTIxZWY2ZTVlZGU4","state":"CfDJ8ARls4BL525HuATxHrUa134OYlLRHf8itfXEYKXJF8R8ractW5f2cu5NvyjDSKai65ZSWHkrwIT_u06tpyPAGSLuk8iqpOLUiEv-xtBkvmQk2OrJNNdVS_NmrRn51BbGJkOR1wO3zm2gcfOpEd7j1keoyxgfsVGWO8yhDNo8E2bGZTFi8Tm28BZAS7EHLAR6JBjHd760jmY7CD3tisUCfLLCq8wlSG4BP5mQnfZVWCeolHlyB9KAsSTZjfybGCMmcxYi7pFf_mnlT_KQx3GM17fXXU5r_sYKPbUKTh-cnlqx89CcSwMtP1_9E5W4CSCJ8VCYE5xD8DfvI2SBn4yvFyM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:27:25.976 +07:00 [ERR] Request validation failed
2019-02-12 16:27:25.976 +07:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855604447289457.NzE1NjNiNmQtYzc1Yy00YTdhLWFhZWQtYTY3NWRhNjhhYjY3MmJhYjE0NjUtODRmNS00NTA2LWIyYTEtYTIxZWY2ZTVlZGU4","state":"CfDJ8ARls4BL525HuATxHrUa134OYlLRHf8itfXEYKXJF8R8ractW5f2cu5NvyjDSKai65ZSWHkrwIT_u06tpyPAGSLuk8iqpOLUiEv-xtBkvmQk2OrJNNdVS_NmrRn51BbGJkOR1wO3zm2gcfOpEd7j1keoyxgfsVGWO8yhDNo8E2bGZTFi8Tm28BZAS7EHLAR6JBjHd760jmY7CD3tisUCfLLCq8wlSG4BP5mQnfZVWCeolHlyB9KAsSTZjfybGCMmcxYi7pFf_mnlT_KQx3GM17fXXU5r_sYKPbUKTh-cnlqx89CcSwMtP1_9E5W4CSCJ8VCYE5xD8DfvI2SBn4yvFyM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:27:26.004 +07:00 [INF] {"ClientId":"mvc","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGPH4B67K6:00000002","TimeStamp":"2019-02-12T09:27:25.0000000Z","ProcessId":24776,"LocalIpAddress":"127.0.0.1:41322","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 16:31:12.172 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 16:31:12.174 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 16:31:12.174 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 16:31:12.174 +07:00 [DBG] Start authorize request
2019-02-12 16:31:12.175 +07:00 [DBG] No user present in authorize request
2019-02-12 16:31:12.175 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 16:31:12.186 +07:00 [DBG] mvc found in database: false
2019-02-12 16:31:12.186 +07:00 [ERR] Unknown client or not enabled: mvc
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855606721528084.YjA4ZmJjMWQtM2UzMC00MzU5LTk3YWUtMDgyZjFiOGViMzVhNjA3ZDAzNmQtZmIyMS00ZjdiLTk4ZmQtZDJlODhkMmQ3ZTM4","state":"CfDJ8ARls4BL525HuATxHrUa137XfCIK3a6RkxU-xwh3A6SLeW-jzDSnou2pdm95dzOUtvmadSaEP5s_GmDxXp2mh2JZ1cJsXuRPy0_JQFIDYUbCmzjNso06jCoSRxFu5X0PjKu3FPiU_Ul_LUiC4-xNOYMYqK7pbiWFb2lwF4rXnYE4h2NJarexuzlCUnL5CF3u6cyYw7Op9Y3y0g7wZBpQ36SSp_47mSnQ_J55dgOjsOJZfnkMAao2eFi4PcltAdHS2tx5yFv-i8KyXZ1RuyqQ1OeGTVJpEgK5bqoKzYGaZ3y-RWehfwlF_LWY6Gl0g1f-pzM6yT2K5y6iHnl-uReRvww","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:31:12.186 +07:00 [ERR] Request validation failed
2019-02-12 16:31:12.186 +07:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855606721528084.YjA4ZmJjMWQtM2UzMC00MzU5LTk3YWUtMDgyZjFiOGViMzVhNjA3ZDAzNmQtZmIyMS00ZjdiLTk4ZmQtZDJlODhkMmQ3ZTM4","state":"CfDJ8ARls4BL525HuATxHrUa137XfCIK3a6RkxU-xwh3A6SLeW-jzDSnou2pdm95dzOUtvmadSaEP5s_GmDxXp2mh2JZ1cJsXuRPy0_JQFIDYUbCmzjNso06jCoSRxFu5X0PjKu3FPiU_Ul_LUiC4-xNOYMYqK7pbiWFb2lwF4rXnYE4h2NJarexuzlCUnL5CF3u6cyYw7Op9Y3y0g7wZBpQ36SSp_47mSnQ_J55dgOjsOJZfnkMAao2eFi4PcltAdHS2tx5yFv-i8KyXZ1RuyqQ1OeGTVJpEgK5bqoKzYGaZ3y-RWehfwlF_LWY6Gl0g1f-pzM6yT2K5y6iHnl-uReRvww","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:31:12.187 +07:00 [INF] {"ClientId":"mvc","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGPH4B67K7:00000001","TimeStamp":"2019-02-12T09:31:12.0000000Z","ProcessId":24776,"LocalIpAddress":"127.0.0.1:41322","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 16:43:06.041 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 16:43:06.525 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 16:43:06.525 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 16:43:06.525 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 16:43:06.526 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 16:43:06.526 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 16:43:06.527 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 16:43:06.943 +07:00 [DBG] Starting grant removal
2019-02-12 16:43:07.571 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 16:43:07.577 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 16:43:07.578 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 16:43:07.578 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 16:43:07.579 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 16:43:07.579 +07:00 [DBG] Error Url: /home/error
2019-02-12 16:43:07.579 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 16:43:14.862 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:43:14.904 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:43:14.904 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:43:14.914 +07:00 [DBG] Start discovery request
2019-02-12 16:43:25.791 +07:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server 'khang-pc\sqlexpress'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:a3113a8a-1453-4588-bfd1-ad101a92a487
Error Number:4060,State:1,Class:11
2019-02-12 16:43:25.875 +07:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:a3113a8a-1453-4588-bfd1-ad101a92a487
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:a3113a8a-1453-4588-bfd1-ad101a92a487
Error Number:4060,State:1,Class:11
2019-02-12 16:43:25.971 +07:00 [INF] {"Details":"System.Data.SqlClient.SqlException (0x80131904): Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'KHANG-PC\\trinh'.\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)\r\n   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)\r\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync() in C:\\local\\identity\\server4\\EntityFramework.Storage\\src\\Stores\\ResourceStore.cs:line 138\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Extensions\\IResourceStoreExtensions.cs:line 105\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri) in C:\\local\\identity\\server4\\IdentityServer4\\src\\ResponseHandling\\Default\\DiscoveryResponseGenerator.cs:line 169\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Endpoints\\DiscoveryEndpoint.cs:line 58\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:a3113a8a-1453-4588-bfd1-ad101a92a487\r\nError Number:4060,State:1,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'KHANG-PC\\trinh'.","ActivityId":"0HLKGPPV0JGJC:00000002","TimeStamp":"2019-02-12T09:43:25.0000000Z","ProcessId":26512,"LocalIpAddress":"127.0.0.1:31842","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-02-12 16:43:25.991 +07:00 [FTL] Unhandled exception: Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'KHANG-PC\trinh'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync() in C:\local\identity\server4\EntityFramework.Storage\src\Stores\ResourceStore.cs:line 138
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store) in C:\local\identity\server4\IdentityServer4\src\Extensions\IResourceStoreExtensions.cs:line 105
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri) in C:\local\identity\server4\IdentityServer4\src\ResponseHandling\Default\DiscoveryResponseGenerator.cs:line 169
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Endpoints\DiscoveryEndpoint.cs:line 58
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:a3113a8a-1453-4588-bfd1-ad101a92a487
Error Number:4060,State:1,Class:11
2019-02-12 16:45:43.809 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 16:45:44.108 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 16:45:44.109 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 16:45:44.109 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 16:45:44.110 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 16:45:44.110 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 16:45:44.110 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 16:45:44.413 +07:00 [DBG] Starting grant removal
2019-02-12 16:45:44.753 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 16:45:44.756 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 16:45:44.756 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 16:45:44.756 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 16:45:44.756 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 16:45:44.757 +07:00 [DBG] Error Url: /home/error
2019-02-12 16:45:44.757 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 16:45:44.819 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:45:44.852 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:45:44.853 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:45:44.860 +07:00 [DBG] Start discovery request
2019-02-12 16:45:46.632 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:45:55.010 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:45:55.014 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:45:55.014 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:45:55.014 +07:00 [DBG] Start discovery request
2019-02-12 16:45:55.100 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:45:55.280 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 16:45:55.281 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 16:45:55.281 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 16:45:55.292 +07:00 [DBG] Start key discovery request
2019-02-12 16:45:55.456 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 16:45:55.468 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 16:45:55.469 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 16:45:55.479 +07:00 [DBG] Start authorize request
2019-02-12 16:45:55.496 +07:00 [DBG] No user present in authorize request
2019-02-12 16:45:55.508 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 16:45:55.750 +07:00 [DBG] mvc found in database: false
2019-02-12 16:45:55.780 +07:00 [ERR] Unknown client or not enabled: mvc
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855615553800100.NTFlZDViODYtMDEzNy00M2YwLWJlMDItNjYxMDk5YjY1ZDU0YTg0ZWM4OWQtNDgwOS00MTg3LWFlM2UtZjg4NWQwZGVjYzM3","state":"CfDJ8ARls4BL525HuATxHrUa136FW5hPGN5b7xWBwYAaxYZogecW8g4fym-s9VUOt7mUtAAQ9WRRb4sTe9uV9x_Bvgl0IEMf3ggCkQaXjsAnriyO10YWWtIpRZbMzDT_YddzBJNFuSe5pNIQgWFpv5GzjY71xe4WjT7w_XtzsREmFrFBoWt9wT2OavygypywFtPJRzQ9pV_8mRyvnJ6_LDgauM3SNGo4dWCpVzBOt_EcNYEAFsbvjc_awd2wPS7KqT4EBvQjp60Z8mmBirpVJPRWTBvNaha_Cb2FHUHhTBECoGJuQyM-vt0q2hmecdxsOPq1gqTnit19yxVo2C3whpi-R_E","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:45:55.802 +07:00 [ERR] Request validation failed
2019-02-12 16:45:55.803 +07:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855615553800100.NTFlZDViODYtMDEzNy00M2YwLWJlMDItNjYxMDk5YjY1ZDU0YTg0ZWM4OWQtNDgwOS00MTg3LWFlM2UtZjg4NWQwZGVjYzM3","state":"CfDJ8ARls4BL525HuATxHrUa136FW5hPGN5b7xWBwYAaxYZogecW8g4fym-s9VUOt7mUtAAQ9WRRb4sTe9uV9x_Bvgl0IEMf3ggCkQaXjsAnriyO10YWWtIpRZbMzDT_YddzBJNFuSe5pNIQgWFpv5GzjY71xe4WjT7w_XtzsREmFrFBoWt9wT2OavygypywFtPJRzQ9pV_8mRyvnJ6_LDgauM3SNGo4dWCpVzBOt_EcNYEAFsbvjc_awd2wPS7KqT4EBvQjp60Z8mmBirpVJPRWTBvNaha_Cb2FHUHhTBECoGJuQyM-vt0q2hmecdxsOPq1gqTnit19yxVo2C3whpi-R_E","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 16:45:55.821 +07:00 [INF] {"ClientId":"mvc","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGPRDSOPQ4:00000005","TimeStamp":"2019-02-12T09:45:55.0000000Z","ProcessId":27140,"LocalIpAddress":"127.0.0.1:26377","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 16:47:34.541 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:47:34.541 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:47:34.541 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:47:34.542 +07:00 [DBG] Start discovery request
2019-02-12 16:47:34.546 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:47:34.700 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 16:47:34.702 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 16:47:34.702 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 16:47:34.702 +07:00 [DBG] Start key discovery request
2019-02-12 16:47:35.172 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 16:47:35.180 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 16:47:35.180 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 16:47:35.196 +07:00 [DBG] Start token request.
2019-02-12 16:47:35.209 +07:00 [DBG] Start client validation
2019-02-12 16:47:35.221 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 16:47:35.227 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 16:47:35.261 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 16:47:35.261 +07:00 [DBG] Secret id found: client
2019-02-12 16:47:35.267 +07:00 [DBG] client found in database: false
2019-02-12 16:47:35.268 +07:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Unknown client","ActivityId":"0HLKGPRDSOPQ8:00000002","TimeStamp":"2019-02-12T09:47:35.0000000Z","ProcessId":27140,"LocalIpAddress":"127.0.0.1:26377","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-02-12 16:47:35.269 +07:00 [ERR] No client with id 'client' found. aborting
2019-02-12 16:57:08.205 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:57:08.206 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:57:08.207 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:57:08.208 +07:00 [DBG] Start discovery request
2019-02-12 16:57:08.218 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:58:08.057 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:58:08.058 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:58:08.059 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:58:08.059 +07:00 [DBG] Start discovery request
2019-02-12 16:58:08.068 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:58:08.305 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 16:58:08.306 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 16:58:08.306 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 16:58:08.306 +07:00 [DBG] Start key discovery request
2019-02-12 16:58:08.852 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 16:58:08.855 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 16:58:08.855 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 16:58:08.856 +07:00 [DBG] Start token request.
2019-02-12 16:58:08.856 +07:00 [DBG] Start client validation
2019-02-12 16:58:08.856 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 16:58:08.856 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 16:58:08.857 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 16:58:08.858 +07:00 [DBG] Secret id found: client
2019-02-12 16:58:08.873 +07:00 [DBG] client found in database: false
2019-02-12 16:58:08.873 +07:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Unknown client","ActivityId":"0HLKGPRDSOPQA:00000004","TimeStamp":"2019-02-12T09:58:08.0000000Z","ProcessId":27140,"LocalIpAddress":"127.0.0.1:26377","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-02-12 16:58:08.874 +07:00 [ERR] No client with id 'client' found. aborting
2019-02-12 16:58:36.896 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 16:58:36.897 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 16:58:36.897 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 16:58:36.897 +07:00 [DBG] Start discovery request
2019-02-12 16:58:36.902 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 16:58:37.062 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 16:58:37.062 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 16:58:37.063 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 16:58:37.063 +07:00 [DBG] Start key discovery request
2019-02-12 16:58:37.449 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 16:58:37.451 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 16:58:37.451 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 16:58:37.451 +07:00 [DBG] Start token request.
2019-02-12 16:58:37.451 +07:00 [DBG] Start client validation
2019-02-12 16:58:37.451 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 16:58:37.451 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 16:58:37.451 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 16:58:37.452 +07:00 [DBG] Secret id found: client
2019-02-12 16:58:37.458 +07:00 [DBG] client found in database: false
2019-02-12 16:58:37.458 +07:00 [INF] {"ClientId":"client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Unknown client","ActivityId":"0HLKGPRDSOPQA:00000007","TimeStamp":"2019-02-12T09:58:37.0000000Z","ProcessId":27140,"LocalIpAddress":"127.0.0.1:26377","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-02-12 16:58:37.459 +07:00 [ERR] No client with id 'client' found. aborting
2019-02-12 16:59:03.682 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 16:59:03.688 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 16:59:03.689 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 16:59:03.689 +07:00 [WRN] Invalid HTTP request for token endpoint
2019-02-12 17:02:18.478 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 17:02:18.481 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 17:02:18.481 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 17:02:18.482 +07:00 [DBG] Start authorize request
2019-02-12 17:02:18.483 +07:00 [DBG] No user present in authorize request
2019-02-12 17:02:18.484 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:02:18.508 +07:00 [DBG] mvc found in database: false
2019-02-12 17:02:18.509 +07:00 [ERR] Unknown client or not enabled: mvc
{"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855625384388213.YTg5MTMzYjMtY2EyMS00OWM4LThlYmUtODhmNWIxOWY4MGY2NzE3OWY3YTItMmMzOC00MjRkLTgzMDUtMWRhMDA3ZDc3NzNj","state":"CfDJ8ARls4BL525HuATxHrUa134Eps1VS6A93ipXxR1hWZ-_1qmOD3WWUqiuIf3_eIXQIO8N4Nk54VhbNgaMFQO9_WoJNopwPFU47VZlRqJeY75elascLOkqXI97iUVazuggrAwcdgNwZ2Kc3Ai_1JsjVsIVaggzvrmWxORGALdWvPna5iI1hR7zM9s2lplYTuj0dz6wKlnmMRcFwpMPSaW9K9sKfeTY0cXU_hkTI-HKR51Hfa1OMUvYIAwAnSgRygidG6aHq8LgOQ8Nl4rkjgMN9y3f2nYZWAqr1TbUSuqvw_TtGM1qGg8DeFs8ugit6Bu_ISph62QxyAG8l8UMGYXdtdY","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:02:18.509 +07:00 [ERR] Request validation failed
2019-02-12 17:02:18.510 +07:00 [INF] {"ClientId":null,"ClientName":null,"RedirectUri":null,"AllowedRedirectUris":null,"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855625384388213.YTg5MTMzYjMtY2EyMS00OWM4LThlYmUtODhmNWIxOWY4MGY2NzE3OWY3YTItMmMzOC00MjRkLTgzMDUtMWRhMDA3ZDc3NzNj","state":"CfDJ8ARls4BL525HuATxHrUa134Eps1VS6A93ipXxR1hWZ-_1qmOD3WWUqiuIf3_eIXQIO8N4Nk54VhbNgaMFQO9_WoJNopwPFU47VZlRqJeY75elascLOkqXI97iUVazuggrAwcdgNwZ2Kc3Ai_1JsjVsIVaggzvrmWxORGALdWvPna5iI1hR7zM9s2lplYTuj0dz6wKlnmMRcFwpMPSaW9K9sKfeTY0cXU_hkTI-HKR51Hfa1OMUvYIAwAnSgRygidG6aHq8LgOQ8Nl4rkjgMN9y3f2nYZWAqr1TbUSuqvw_TtGM1qGg8DeFs8ugit6Bu_ISph62QxyAG8l8UMGYXdtdY","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:02:18.510 +07:00 [INF] {"ClientId":"mvc","ClientName":null,"RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Unknown client or client not enabled","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGPRDSOPQB:00000001","TimeStamp":"2019-02-12T10:02:18.0000000Z","ProcessId":27140,"LocalIpAddress":"127.0.0.1:26377","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 17:02:51.914 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:02:51.917 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:02:51.917 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:02:51.917 +07:00 [DBG] Start discovery request
2019-02-12 17:02:51.924 +07:00 [DBG] Found [] as all scopes in database
2019-02-12 17:02:52.070 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:02:52.071 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:02:52.072 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:02:52.072 +07:00 [DBG] Start key discovery request
2019-02-12 17:02:52.527 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:02:52.528 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:02:52.528 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:02:52.529 +07:00 [DBG] Start token request.
2019-02-12 17:02:52.529 +07:00 [DBG] Start client validation
2019-02-12 17:02:52.529 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:02:52.529 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:02:52.530 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:02:52.530 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:02:52.537 +07:00 [DBG] ro.client found in database: false
2019-02-12 17:02:52.538 +07:00 [INF] {"ClientId":"ro.client","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"Unknown client","ActivityId":"0HLKGPRDSOPQB:00000006","TimeStamp":"2019-02-12T10:02:52.0000000Z","ProcessId":27140,"LocalIpAddress":"127.0.0.1:26377","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-02-12 17:02:52.538 +07:00 [ERR] No client with id 'ro.client' found. aborting
2019-02-12 17:22:14.180 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:22:14.572 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 17:22:14.573 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 17:22:14.573 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 17:22:14.573 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 17:22:14.573 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 17:22:14.573 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 17:22:14.789 +07:00 [DBG] Starting grant removal
2019-02-12 17:22:15.115 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 17:22:15.122 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 17:22:15.122 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 17:22:15.123 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 17:22:15.123 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 17:22:15.123 +07:00 [DBG] Error Url: /home/error
2019-02-12 17:22:15.123 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 17:22:33.732 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:22:33.758 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:22:33.758 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:22:33.765 +07:00 [DBG] Start discovery request
2019-02-12 17:22:33.941 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:22:33.943 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:22:33.943 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:22:33.951 +07:00 [DBG] Start key discovery request
2019-02-12 17:22:34.392 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:22:34.407 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:22:34.407 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:22:34.423 +07:00 [DBG] Start token request.
2019-02-12 17:22:34.432 +07:00 [DBG] Start client validation
2019-02-12 17:22:34.444 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:22:34.451 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:22:34.480 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:22:34.480 +07:00 [DBG] Secret id found: client
2019-02-12 17:22:34.508 +07:00 [DBG] client configuration validation for client client succeeded.
2019-02-12 17:22:34.529 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:22:34.530 +07:00 [DBG] Client validation success
2019-02-12 17:22:34.558 +07:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQFQLKQA6:00000004","TimeStamp":"2019-02-12T10:22:34.0000000Z","ProcessId":25256,"LocalIpAddress":"127.0.0.1:3473","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:22:34.598 +07:00 [DBG] Start token request validation
2019-02-12 17:22:34.622 +07:00 [DBG] Start client credentials token request validation
2019-02-12 17:22:34.693 +07:00 [DBG] client credentials token request validation success
2019-02-12 17:22:34.714 +07:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:22:34.782 +07:00 [DBG] Getting claims for access token for client: client
2019-02-12 17:22:34.943 +07:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****iP1w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGQFQLKQA6:00000004","TimeStamp":"2019-02-12T10:22:34.0000000Z","ProcessId":25256,"LocalIpAddress":"127.0.0.1:3473","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 17:22:34.950 +07:00 [DBG] Token request success.
2019-02-12 17:22:37.157 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:22:37.158 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:22:37.158 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:22:37.158 +07:00 [DBG] Start discovery request
2019-02-12 17:22:37.408 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:22:37.409 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:22:37.410 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:22:37.410 +07:00 [DBG] Start key discovery request
2019-02-12 17:22:52.500 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:22:52.502 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:22:52.502 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:22:52.502 +07:00 [DBG] Start discovery request
2019-02-12 17:22:52.624 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:22:52.625 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:22:52.625 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:22:52.625 +07:00 [DBG] Start key discovery request
2019-02-12 17:22:52.986 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:22:52.991 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:22:52.991 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:22:52.991 +07:00 [DBG] Start token request.
2019-02-12 17:22:52.991 +07:00 [DBG] Start client validation
2019-02-12 17:22:52.992 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:22:52.992 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:22:52.992 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:22:52.992 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:22:52.993 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:22:52.993 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:22:52.993 +07:00 [DBG] Client validation success
2019-02-12 17:22:52.993 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQFQLKQA6:00000009","TimeStamp":"2019-02-12T10:22:52.0000000Z","ProcessId":25256,"LocalIpAddress":"127.0.0.1:3473","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:22:52.994 +07:00 [DBG] Start token request validation
2019-02-12 17:22:53.026 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:22:54.073 +07:00 [INF] No user found matching username: alice
2019-02-12 17:22:54.075 +07:00 [INF] {"Username":"alice","Endpoint":"Token","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid username","ActivityId":"0HLKGQFQLKQA6:00000009","TimeStamp":"2019-02-12T10:22:54.0000000Z","ProcessId":25256,"LocalIpAddress":"127.0.0.1:3473","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:22:54.080 +07:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:22:54.080 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLKGQFQLKQA6:00000009","TimeStamp":"2019-02-12T10:22:54.0000000Z","ProcessId":25256,"LocalIpAddress":"127.0.0.1:3473","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:22:54.093 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGQFQLKQA6:00000009","TimeStamp":"2019-02-12T10:22:54.0000000Z","ProcessId":25256,"LocalIpAddress":"127.0.0.1:3473","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 17:23:45.825 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:23:45.825 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:23:45.826 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:23:45.826 +07:00 [DBG] Start discovery request
2019-02-12 17:23:51.188 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:23:51.442 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 17:23:51.443 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 17:23:51.443 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 17:23:51.443 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 17:23:51.443 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 17:23:51.443 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 17:23:51.669 +07:00 [DBG] Starting grant removal
2019-02-12 17:23:52.197 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 17:23:52.206 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 17:23:52.206 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 17:23:52.206 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 17:23:52.206 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 17:23:52.206 +07:00 [DBG] Error Url: /home/error
2019-02-12 17:23:52.206 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 17:23:52.270 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:23:52.311 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:23:52.312 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:23:52.321 +07:00 [DBG] Start key discovery request
2019-02-12 17:23:52.883 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:23:52.908 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:23:52.909 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:23:52.932 +07:00 [DBG] Start token request.
2019-02-12 17:23:52.961 +07:00 [DBG] Start client validation
2019-02-12 17:23:52.977 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:23:52.987 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:23:53.021 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:23:53.021 +07:00 [DBG] Secret id found: client
2019-02-12 17:23:53.052 +07:00 [DBG] client configuration validation for client client succeeded.
2019-02-12 17:23:53.074 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:23:53.075 +07:00 [DBG] Client validation success
2019-02-12 17:23:53.114 +07:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQGNIN5DB:00000002","TimeStamp":"2019-02-12T10:23:53.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:23:53.157 +07:00 [DBG] Start token request validation
2019-02-12 17:23:53.180 +07:00 [DBG] Start client credentials token request validation
2019-02-12 17:23:53.259 +07:00 [DBG] client credentials token request validation success
2019-02-12 17:23:53.284 +07:00 [INF] Token request validation success
{"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:23:53.374 +07:00 [DBG] Getting claims for access token for client: client
2019-02-12 17:23:53.589 +07:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****5MMQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGQGNIN5DB:00000002","TimeStamp":"2019-02-12T10:23:53.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 17:23:53.596 +07:00 [DBG] Token request success.
2019-02-12 17:24:13.512 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 17:24:13.519 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 17:24:13.520 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 17:24:13.530 +07:00 [DBG] Start authorize request
2019-02-12 17:24:13.548 +07:00 [DBG] No user present in authorize request
2019-02-12 17:24:13.562 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:13.574 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:13.589 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:13.592 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:13.645 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:13.658 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa137s194iPtVLe3KaE7S_S4Ls_0UlBURwftsjG9qy5gIcASKGmPvUnv1GGd-NpeUKU3kUa0DThaqawN3zfYIFa-RSELvprEXzqRHILOPn3rQJkiDWNQ6puyHulcki45URzbkg2qq3CLaKYfSPLLejmX_-rS8h9gI4NN4Wl6XMxhf6ApnDazEy9HlIEixGt9Jvre2OzS6dwDjPBGv-mn29s7NXUdL53hBI3IqoWeVg_Q0jtWy8O7h51nOP7N2DtmXaUDvp5w8L_VrkblZWPomiG-hu9ZHTbu829S2wa58NtYiSkP9xZVSnSCqV6n9ssWa--AA","UiLocales":null,"Nonce":"636855638534920554.ZWU0OTA4ZWMtMzZlNC00OGI1LWFhZGUtMWUzOTY1NWQ1MmViMTVhMjY0MzktYmM3OS00MTA3LTk5YjgtNDg1ZmJjZmFkYTVj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855638534920554.ZWU0OTA4ZWMtMzZlNC00OGI1LWFhZGUtMWUzOTY1NWQ1MmViMTVhMjY0MzktYmM3OS00MTA3LTk5YjgtNDg1ZmJjZmFkYTVj","state":"CfDJ8ARls4BL525HuATxHrUa137s194iPtVLe3KaE7S_S4Ls_0UlBURwftsjG9qy5gIcASKGmPvUnv1GGd-NpeUKU3kUa0DThaqawN3zfYIFa-RSELvprEXzqRHILOPn3rQJkiDWNQ6puyHulcki45URzbkg2qq3CLaKYfSPLLejmX_-rS8h9gI4NN4Wl6XMxhf6ApnDazEy9HlIEixGt9Jvre2OzS6dwDjPBGv-mn29s7NXUdL53hBI3IqoWeVg_Q0jtWy8O7h51nOP7N2DtmXaUDvp5w8L_VrkblZWPomiG-hu9ZHTbu829S2wa58NtYiSkP9xZVSnSCqV6n9ssWa--AA","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:24:13.693 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 17:24:14.208 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:14.209 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:14.209 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:14.209 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:14.209 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:14.217 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:30.791 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:30.791 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:30.791 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:30.792 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:30.792 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:31.607 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQGNIN5DB:00000005","TimeStamp":"2019-02-12T10:24:31.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:24:31.610 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:31.610 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:31.610 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:31.611 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:31.612 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:31.612 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:37.471 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:37.471 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:37.471 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:37.472 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:37.472 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:37.488 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQGNIN5DB:00000006","TimeStamp":"2019-02-12T10:24:37.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:24:37.488 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:37.489 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:37.489 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:37.489 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:37.489 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:37.489 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:48.998 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:48.999 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:49.001 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:49.001 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:49.002 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:49.010 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQGNIN5DB:00000007","TimeStamp":"2019-02-12T10:24:49.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:24:49.011 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:49.011 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:49.012 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:49.012 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:49.012 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:49.013 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:54.357 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:54.357 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:54.359 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:54.360 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:54.360 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:54.409 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:54.430 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 17:24:54.436 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 17:24:54.436 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 17:24:54.453 +07:00 [DBG] Start authorize callback request
2019-02-12 17:24:54.461 +07:00 [DBG] No user present in authorize request
2019-02-12 17:24:54.462 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:54.462 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:54.462 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:54.462 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:54.463 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:54.463 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa137s194iPtVLe3KaE7S_S4Ls_0UlBURwftsjG9qy5gIcASKGmPvUnv1GGd-NpeUKU3kUa0DThaqawN3zfYIFa-RSELvprEXzqRHILOPn3rQJkiDWNQ6puyHulcki45URzbkg2qq3CLaKYfSPLLejmX_-rS8h9gI4NN4Wl6XMxhf6ApnDazEy9HlIEixGt9Jvre2OzS6dwDjPBGv-mn29s7NXUdL53hBI3IqoWeVg_Q0jtWy8O7h51nOP7N2DtmXaUDvp5w8L_VrkblZWPomiG-hu9ZHTbu829S2wa58NtYiSkP9xZVSnSCqV6n9ssWa--AA","UiLocales":null,"Nonce":"636855638534920554.ZWU0OTA4ZWMtMzZlNC00OGI1LWFhZGUtMWUzOTY1NWQ1MmViMTVhMjY0MzktYmM3OS00MTA3LTk5YjgtNDg1ZmJjZmFkYTVj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855638534920554.ZWU0OTA4ZWMtMzZlNC00OGI1LWFhZGUtMWUzOTY1NWQ1MmViMTVhMjY0MzktYmM3OS00MTA3LTk5YjgtNDg1ZmJjZmFkYTVj","state":"CfDJ8ARls4BL525HuATxHrUa137s194iPtVLe3KaE7S_S4Ls_0UlBURwftsjG9qy5gIcASKGmPvUnv1GGd-NpeUKU3kUa0DThaqawN3zfYIFa-RSELvprEXzqRHILOPn3rQJkiDWNQ6puyHulcki45URzbkg2qq3CLaKYfSPLLejmX_-rS8h9gI4NN4Wl6XMxhf6ApnDazEy9HlIEixGt9Jvre2OzS6dwDjPBGv-mn29s7NXUdL53hBI3IqoWeVg_Q0jtWy8O7h51nOP7N2DtmXaUDvp5w8L_VrkblZWPomiG-hu9ZHTbu829S2wa58NtYiSkP9xZVSnSCqV6n9ssWa--AA","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:24:54.464 +07:00 [INF] Error: User denied consent
2019-02-12 17:24:54.473 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa137s194iPtVLe3KaE7S_S4Ls_0UlBURwftsjG9qy5gIcASKGmPvUnv1GGd-NpeUKU3kUa0DThaqawN3zfYIFa-RSELvprEXzqRHILOPn3rQJkiDWNQ6puyHulcki45URzbkg2qq3CLaKYfSPLLejmX_-rS8h9gI4NN4Wl6XMxhf6ApnDazEy9HlIEixGt9Jvre2OzS6dwDjPBGv-mn29s7NXUdL53hBI3IqoWeVg_Q0jtWy8O7h51nOP7N2DtmXaUDvp5w8L_VrkblZWPomiG-hu9ZHTbu829S2wa58NtYiSkP9xZVSnSCqV6n9ssWa--AA","UiLocales":null,"Nonce":"636855638534920554.ZWU0OTA4ZWMtMzZlNC00OGI1LWFhZGUtMWUzOTY1NWQ1MmViMTVhMjY0MzktYmM3OS00MTA3LTk5YjgtNDg1ZmJjZmFkYTVj","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855638534920554.ZWU0OTA4ZWMtMzZlNC00OGI1LWFhZGUtMWUzOTY1NWQ1MmViMTVhMjY0MzktYmM3OS00MTA3LTk5YjgtNDg1ZmJjZmFkYTVj","state":"CfDJ8ARls4BL525HuATxHrUa137s194iPtVLe3KaE7S_S4Ls_0UlBURwftsjG9qy5gIcASKGmPvUnv1GGd-NpeUKU3kUa0DThaqawN3zfYIFa-RSELvprEXzqRHILOPn3rQJkiDWNQ6puyHulcki45URzbkg2qq3CLaKYfSPLLejmX_-rS8h9gI4NN4Wl6XMxhf6ApnDazEy9HlIEixGt9Jvre2OzS6dwDjPBGv-mn29s7NXUdL53hBI3IqoWeVg_Q0jtWy8O7h51nOP7N2DtmXaUDvp5w8L_VrkblZWPomiG-hu9ZHTbu829S2wa58NtYiSkP9xZVSnSCqV6n9ssWa--AA","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:24:54.477 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Error":"access_denied","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGQGNIN5DB:00000009","TimeStamp":"2019-02-12T10:24:54.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 17:24:58.139 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:58.139 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:58.139 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:58.139 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:58.140 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:58.150 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQGNIN5DB:0000000A","TimeStamp":"2019-02-12T10:24:58.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:24:58.150 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:24:58.151 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:24:58.151 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:24:58.151 +07:00 [DBG] No PKCE used.
2019-02-12 17:24:58.151 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:24:58.152 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:00.281 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:00.281 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:00.281 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:00.281 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:00.281 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:00.283 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQGNIN5DB:0000000B","TimeStamp":"2019-02-12T10:25:00.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:25:00.283 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:00.283 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:00.283 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:00.283 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:00.284 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:00.284 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:01.166 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:01.166 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:01.167 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:01.167 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:01.169 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:01.182 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQGNIN5DB:0000000C","TimeStamp":"2019-02-12T10:25:01.0000000Z","ProcessId":25696,"LocalIpAddress":"127.0.0.1:38765","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:25:01.182 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:01.182 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:01.182 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:01.182 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:01.183 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:01.183 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:01.776 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:01.778 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:01.778 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:01.781 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:01.781 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:01.782 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:06.301 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 17:25:06.302 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 17:25:06.302 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 17:25:06.302 +07:00 [DBG] Start authorize request
2019-02-12 17:25:06.302 +07:00 [DBG] No user present in authorize request
2019-02-12 17:25:06.302 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:06.303 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:06.304 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:06.305 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:06.306 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:06.306 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa13569WbKc46JOQsweceiicXnSZYz0FzMa_lGQrS_pPtcRMqTTXNfKQqyHtehMgY4-JXQKLBswB1dRJ55p7omlPx4kgD3uob9SzyBb_0Hum94ucqr-Kyny312AeWv-qg-QX7J4cp6caelcg_42NTX-bWt83QUV3cVDLhDMAS3Jtz6rwQmjWtF1YvNicY4FJIQL0GHTodFUIbW4Yjg8fxQsUtC3qFH7N2uMHyvcFeRWrNNXPypSIJDmOJAuAYpMLm2gUztCy6ziKqs0Mbm9G-kbteXJbHGKbm5rB4mJhTfd29afpNdtnvwM36r9aDdK9Gm6B4","UiLocales":null,"Nonce":"636855639062461114.NjViNDEwZDctNGUxYi00ZDZmLWFhNDgtMGM0MmRlYWNjMTVkY2NiMDYyMzUtMjI5ZS00NDFjLWFjMWMtM2E2MWYyMzA3Zjlk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855639062461114.NjViNDEwZDctNGUxYi00ZDZmLWFhNDgtMGM0MmRlYWNjMTVkY2NiMDYyMzUtMjI5ZS00NDFjLWFjMWMtM2E2MWYyMzA3Zjlk","state":"CfDJ8ARls4BL525HuATxHrUa13569WbKc46JOQsweceiicXnSZYz0FzMa_lGQrS_pPtcRMqTTXNfKQqyHtehMgY4-JXQKLBswB1dRJ55p7omlPx4kgD3uob9SzyBb_0Hum94ucqr-Kyny312AeWv-qg-QX7J4cp6caelcg_42NTX-bWt83QUV3cVDLhDMAS3Jtz6rwQmjWtF1YvNicY4FJIQL0GHTodFUIbW4Yjg8fxQsUtC3qFH7N2uMHyvcFeRWrNNXPypSIJDmOJAuAYpMLm2gUztCy6ziKqs0Mbm9G-kbteXJbHGKbm5rB4mJhTfd29afpNdtnvwM36r9aDdK9Gm6B4","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:25:06.306 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 17:25:06.343 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:25:06.343 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:25:06.343 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:25:06.343 +07:00 [DBG] No PKCE used.
2019-02-12 17:25:06.344 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:25:06.344 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:26:51.747 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:26:51.749 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:26:51.749 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:26:51.761 +07:00 [DBG] Start discovery request
2019-02-12 17:30:59.142 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:30:59.548 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 17:30:59.549 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 17:30:59.549 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 17:30:59.549 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 17:30:59.549 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 17:30:59.549 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 17:30:59.800 +07:00 [DBG] Starting grant removal
2019-02-12 17:31:00.307 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 17:31:00.316 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 17:31:00.316 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 17:31:00.317 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 17:31:00.317 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 17:31:00.317 +07:00 [DBG] Error Url: /home/error
2019-02-12 17:31:00.317 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 17:31:03.833 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 17:31:03.845 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 17:31:03.845 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 17:31:03.853 +07:00 [DBG] Start authorize request
2019-02-12 17:31:03.875 +07:00 [DBG] No user present in authorize request
2019-02-12 17:31:03.886 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:03.929 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:03.941 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:03.944 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:04.053 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:04.097 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa137CjlWlUidgH6iYNFo2tBP01TxqECpwyREMSsqOwKPc3mZmaeWrCF7_xgWY6jHT04pZkeU8lOVb80GVXa-VzzadXX95b-LEtUm6VhgUa5ir_v9lLHPCeFmpaTennMow7CXaw6l7a3bV5np2r7oRiNVBzlz-M0sMTjoK9roPEf2sHfUtc4d4WiIUtsozdBYC5nd1qdNlgPGRvg9krO446HP8B_i2-27wxMp8T5Qtp5vi9eKCWQP0ukVKFmJ0AlhkWzTBdUPrGZF2L3cV5TG4E3tuTSx1e1_hX7yUfqWSka6gDEY7Jaqs6wRmCIxyXnVF_TM","UiLocales":null,"Nonce":"636855642637887961.ZTUyNWRiMjUtNTM0Ny00Nzk3LTg5MDktYzY3MTU3YjY3NjZhZTM3ZDQ4YWMtMDdiOS00ZDJhLTg3YjgtYmExYzRjY2Q2MWM4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855642637887961.ZTUyNWRiMjUtNTM0Ny00Nzk3LTg5MDktYzY3MTU3YjY3NjZhZTM3ZDQ4YWMtMDdiOS00ZDJhLTg3YjgtYmExYzRjY2Q2MWM4","state":"CfDJ8ARls4BL525HuATxHrUa137CjlWlUidgH6iYNFo2tBP01TxqECpwyREMSsqOwKPc3mZmaeWrCF7_xgWY6jHT04pZkeU8lOVb80GVXa-VzzadXX95b-LEtUm6VhgUa5ir_v9lLHPCeFmpaTennMow7CXaw6l7a3bV5np2r7oRiNVBzlz-M0sMTjoK9roPEf2sHfUtc4d4WiIUtsozdBYC5nd1qdNlgPGRvg9krO446HP8B_i2-27wxMp8T5Qtp5vi9eKCWQP0ukVKFmJ0AlhkWzTBdUPrGZF2L3cV5TG4E3tuTSx1e1_hX7yUfqWSka6gDEY7Jaqs6wRmCIxyXnVF_TM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:31:04.168 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 17:31:04.521 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:04.528 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:04.528 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:04.528 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:04.529 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:04.537 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:12.131 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:12.131 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:12.131 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:12.133 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:12.138 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:12.990 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQKN4KUFS:00000004","TimeStamp":"2019-02-12T10:31:12.0000000Z","ProcessId":26132,"LocalIpAddress":"127.0.0.1:26976","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:31:12.993 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:12.994 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:12.994 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:12.994 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:12.996 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:12.996 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:17.302 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:17.302 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:17.302 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:17.303 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:17.303 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:17.343 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQKN4KUFS:00000005","TimeStamp":"2019-02-12T10:31:17.0000000Z","ProcessId":26132,"LocalIpAddress":"127.0.0.1:26976","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:31:17.343 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:17.345 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:17.345 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:17.346 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:17.346 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:17.347 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:21.256 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:21.257 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:21.266 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:21.266 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:21.266 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:21.272 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQKN4KUFS:00000006","TimeStamp":"2019-02-12T10:31:21.0000000Z","ProcessId":26132,"LocalIpAddress":"127.0.0.1:26976","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:31:21.273 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:21.273 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:21.273 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:21.273 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:21.278 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:21.279 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:25.912 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:25.912 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:25.913 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:25.913 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:25.915 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:25.921 +07:00 [INF] {"Username":"bob","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQKN4KUFS:00000007","TimeStamp":"2019-02-12T10:31:25.0000000Z","ProcessId":26132,"LocalIpAddress":"127.0.0.1:26976","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:31:25.921 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:31:25.922 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:31:25.922 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:31:25.922 +07:00 [DBG] No PKCE used.
2019-02-12 17:31:25.922 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:31:25.922 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:32:05.516 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:32:06.870 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 17:32:06.871 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 17:32:06.871 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 17:32:06.872 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 17:32:06.872 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 17:32:06.872 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 17:32:07.353 +07:00 [DBG] Starting grant removal
2019-02-12 17:32:07.731 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 17:32:07.735 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 17:32:07.735 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 17:32:07.735 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 17:32:07.735 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 17:32:07.735 +07:00 [DBG] Error Url: /home/error
2019-02-12 17:32:07.735 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 17:32:08.830 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:32:08.891 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:32:08.910 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:32:08.915 +07:00 [DBG] No PKCE used.
2019-02-12 17:32:09.119 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:32:11.437 +07:00 [INF] {"Username":"bob","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQLB9SEKD:00000001","TimeStamp":"2019-02-12T10:32:11.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:32:11.543 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:32:11.544 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:32:11.544 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 17:32:11.544 +07:00 [DBG] No PKCE used.
2019-02-12 17:32:11.545 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:32:11.558 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 17:34:23.444 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:34:23.453 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:34:23.454 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:34:23.461 +07:00 [DBG] Start discovery request
2019-02-12 17:34:23.707 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:34:23.707 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:34:23.708 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:34:23.717 +07:00 [DBG] Start key discovery request
2019-02-12 17:34:24.090 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:34:24.103 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:34:24.103 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:34:24.122 +07:00 [DBG] Start token request.
2019-02-12 17:34:24.136 +07:00 [DBG] Start client validation
2019-02-12 17:34:24.145 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:34:24.156 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:34:24.157 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:34:24.157 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:34:24.158 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:34:24.179 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:34:24.179 +07:00 [DBG] Client validation success
2019-02-12 17:34:24.180 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQLB9SEKE:00000004","TimeStamp":"2019-02-12T10:34:24.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:34:24.195 +07:00 [DBG] Start token request validation
2019-02-12 17:34:24.215 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:34:24.245 +07:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:34:24.253 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLKGQLB9SEKE:00000004","TimeStamp":"2019-02-12T10:34:24.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:34:24.257 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGQLB9SEKE:00000004","TimeStamp":"2019-02-12T10:34:24.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 17:36:04.545 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:36:04.547 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:36:04.549 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:36:04.550 +07:00 [DBG] Start discovery request
2019-02-12 17:36:04.702 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:36:04.702 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:36:04.702 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:36:04.702 +07:00 [DBG] Start key discovery request
2019-02-12 17:36:05.191 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:36:05.191 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:36:05.192 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:36:05.192 +07:00 [DBG] Start token request.
2019-02-12 17:36:05.192 +07:00 [DBG] Start client validation
2019-02-12 17:36:05.192 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:36:05.192 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:36:05.192 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:36:05.192 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:36:05.192 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:36:05.193 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:36:05.193 +07:00 [DBG] Client validation success
2019-02-12 17:36:05.193 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000004","TimeStamp":"2019-02-12T10:36:05.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:36:05.195 +07:00 [DBG] Start token request validation
2019-02-12 17:36:05.195 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:36:05.207 +07:00 [DBG] IsActive called from: ResourceOwnerValidation
2019-02-12 17:36:05.211 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000004","TimeStamp":"2019-02-12T10:36:05.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 17:36:05.211 +07:00 [DBG] Resource owner password token request validation success.
2019-02-12 17:36:05.216 +07:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:36:05.290 +07:00 [DBG] Getting claims for access token for client: ro.client
2019-02-12 17:36:05.291 +07:00 [DBG] Getting claims for access token for subject: 1
2019-02-12 17:36:05.301 +07:00 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-02-12 17:36:05.304 +07:00 [DBG] Issued claims: []
2019-02-12 17:36:05.499 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****56MA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000004","TimeStamp":"2019-02-12T10:36:05.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 17:36:05.502 +07:00 [DBG] Token request success.
2019-02-12 17:36:31.900 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:36:31.900 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:36:31.900 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:36:31.901 +07:00 [DBG] Start discovery request
2019-02-12 17:36:32.129 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:36:32.129 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:36:32.129 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:36:32.130 +07:00 [DBG] Start key discovery request
2019-02-12 17:36:32.585 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:36:32.585 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:36:32.585 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:36:32.585 +07:00 [DBG] Start token request.
2019-02-12 17:36:32.586 +07:00 [DBG] Start client validation
2019-02-12 17:36:32.586 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:36:32.586 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:36:32.586 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:36:32.586 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:36:32.587 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:36:32.587 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:36:32.587 +07:00 [DBG] Client validation success
2019-02-12 17:36:32.587 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000007","TimeStamp":"2019-02-12T10:36:32.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:36:32.587 +07:00 [DBG] Start token request validation
2019-02-12 17:36:32.587 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:36:32.590 +07:00 [INF] User authentication failed: ["invalid_username_or_password"], request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:36:32.592 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLKGQLB9SEKF:00000007","TimeStamp":"2019-02-12T10:36:32.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:36:32.593 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000007","TimeStamp":"2019-02-12T10:36:32.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-12 17:36:43.916 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:36:43.916 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:36:43.916 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:36:43.916 +07:00 [DBG] Start discovery request
2019-02-12 17:36:44.050 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:36:44.050 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:36:44.050 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:36:44.050 +07:00 [DBG] Start key discovery request
2019-02-12 17:36:44.473 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:36:44.474 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:36:44.474 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:36:44.474 +07:00 [DBG] Start token request.
2019-02-12 17:36:44.474 +07:00 [DBG] Start client validation
2019-02-12 17:36:44.474 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:36:44.475 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:36:44.475 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:36:44.475 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:36:44.476 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:36:44.476 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:36:44.476 +07:00 [DBG] Client validation success
2019-02-12 17:36:44.476 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQLB9SEKF:0000000A","TimeStamp":"2019-02-12T10:36:44.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:36:44.476 +07:00 [DBG] Start token request validation
2019-02-12 17:36:44.476 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:36:44.478 +07:00 [DBG] IsActive called from: ResourceOwnerValidation
2019-02-12 17:36:44.479 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:0000000A","TimeStamp":"2019-02-12T10:36:44.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 17:36:44.480 +07:00 [DBG] Resource owner password token request validation success.
2019-02-12 17:36:44.481 +07:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:36:44.482 +07:00 [DBG] Getting claims for access token for client: ro.client
2019-02-12 17:36:44.482 +07:00 [DBG] Getting claims for access token for subject: 1
2019-02-12 17:36:44.482 +07:00 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-02-12 17:36:44.482 +07:00 [DBG] Issued claims: []
2019-02-12 17:36:44.490 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****_ofw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:0000000A","TimeStamp":"2019-02-12T10:36:44.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 17:36:44.490 +07:00 [DBG] Token request success.
2019-02-12 17:36:58.372 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:36:58.372 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:36:58.372 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:36:58.373 +07:00 [DBG] Start discovery request
2019-02-12 17:36:58.542 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:36:58.542 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:36:58.542 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:36:58.542 +07:00 [DBG] Start key discovery request
2019-02-12 17:36:59.090 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:36:59.090 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:36:59.090 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:36:59.091 +07:00 [DBG] Start token request.
2019-02-12 17:36:59.091 +07:00 [DBG] Start client validation
2019-02-12 17:36:59.091 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:36:59.091 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:36:59.091 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:36:59.091 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:36:59.091 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:36:59.091 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:36:59.091 +07:00 [DBG] Client validation success
2019-02-12 17:36:59.091 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQLB9SEKF:0000000D","TimeStamp":"2019-02-12T10:36:59.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:36:59.092 +07:00 [DBG] Start token request validation
2019-02-12 17:36:59.092 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:36:59.092 +07:00 [DBG] IsActive called from: ResourceOwnerValidation
2019-02-12 17:36:59.092 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:0000000D","TimeStamp":"2019-02-12T10:36:59.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 17:36:59.092 +07:00 [DBG] Resource owner password token request validation success.
2019-02-12 17:36:59.092 +07:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:36:59.093 +07:00 [DBG] Getting claims for access token for client: ro.client
2019-02-12 17:36:59.093 +07:00 [DBG] Getting claims for access token for subject: 1
2019-02-12 17:36:59.093 +07:00 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-02-12 17:36:59.093 +07:00 [DBG] Issued claims: []
2019-02-12 17:36:59.100 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****B7aQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:0000000D","TimeStamp":"2019-02-12T10:36:59.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 17:36:59.102 +07:00 [DBG] Token request success.
2019-02-12 17:37:08.708 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:37:08.710 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:37:08.711 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:37:08.711 +07:00 [DBG] Start discovery request
2019-02-12 17:37:08.975 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:37:08.975 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:37:08.975 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:37:08.976 +07:00 [DBG] Start key discovery request
2019-02-12 17:37:09.347 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 17:37:09.347 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 17:37:09.348 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 17:37:09.348 +07:00 [DBG] Start token request.
2019-02-12 17:37:09.348 +07:00 [DBG] Start client validation
2019-02-12 17:37:09.348 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 17:37:09.348 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 17:37:09.348 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 17:37:09.348 +07:00 [DBG] Secret id found: ro.client
2019-02-12 17:37:09.348 +07:00 [DBG] client configuration validation for client ro.client succeeded.
2019-02-12 17:37:09.348 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 17:37:09.348 +07:00 [DBG] Client validation success
2019-02-12 17:37:09.349 +07:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000010","TimeStamp":"2019-02-12T10:37:09.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 17:37:09.349 +07:00 [DBG] Start token request validation
2019-02-12 17:37:09.349 +07:00 [DBG] Start resource owner password token request validation
2019-02-12 17:37:09.349 +07:00 [DBG] IsActive called from: ResourceOwnerValidation
2019-02-12 17:37:09.349 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":null,"Endpoint":"Token","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000010","TimeStamp":"2019-02-12T10:37:09.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 17:37:09.349 +07:00 [DBG] Resource owner password token request validation success.
2019-02-12 17:37:09.350 +07:00 [INF] Token request validation success
{"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"username":"alice","password":"***REDACTED***","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-02-12 17:37:09.350 +07:00 [DBG] Getting claims for access token for client: ro.client
2019-02-12 17:37:09.350 +07:00 [DBG] Getting claims for access token for subject: 1
2019-02-12 17:37:09.350 +07:00 [DBG] Get profile called for subject 1 from client ro.client with claim types [] via ClaimsProviderAccessToken
2019-02-12 17:37:09.350 +07:00 [DBG] Issued claims: []
2019-02-12 17:37:09.358 +07:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****LcYQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGQLB9SEKF:00000010","TimeStamp":"2019-02-12T10:37:09.0000000Z","ProcessId":28220,"LocalIpAddress":"127.0.0.1:22240","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 17:37:09.358 +07:00 [DBG] Token request success.
2019-02-12 17:47:39.184 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:47:39.479 +07:00 [FTL] Application startup exception
System.ArgumentException: Clients must not contain duplicate ids
   at IdentityServer4.Stores.InMemoryClientStore..ctor(IEnumerable`1 clients) in C:\local\identity\server4\IdentityServer4\src\Stores\InMemory\InMemoryClientStore.cs:line 29
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitTransient(TransientCallSite transientCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitTransient(TransientCallSite transientCallSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(IServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.TestService(IServiceProvider serviceProvider, Type service, ILogger logger, String message, Boolean doThrow) in C:\local\identity\server4\IdentityServer4\src\Configuration\IdentityServerApplicationBuilderExtensions.cs:line 148
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.Validate(IApplicationBuilder app) in C:\local\identity\server4\IdentityServer4\src\Configuration\IdentityServerApplicationBuilderExtensions.cs:line 59
   at Microsoft.AspNetCore.Builder.IdentityServerApplicationBuilderExtensions.UseIdentityServer(IApplicationBuilder app) in C:\local\identity\server4\IdentityServer4\src\Configuration\IdentityServerApplicationBuilderExtensions.cs:line 29
   at IdentityServerAspNetIdentity.Startup.Configure(IApplicationBuilder app) in C:\Users\trinh\Downloads\Combined_AspId_and_EFStorage\src\IdentityServer\Startup.cs:line 111
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.Configure(IApplicationBuilder app)
   at Microsoft.AspNetCore.Server.IISIntegration.IISSetupFilter.<>c__DisplayClass4_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.HostFilteringStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder app)
   at Microsoft.AspNetCore.Hosting.Internal.AutoRequestServicesStartupFilter.<>c__DisplayClass0_0.<Configure>b__0(IApplicationBuilder builder)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-12 17:47:39.561 +07:00 [DBG] Starting grant removal
2019-02-12 17:48:41.563 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:48:42.159 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 17:48:42.160 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 17:48:42.160 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 17:48:42.160 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 17:48:42.160 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 17:48:42.160 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 17:48:42.478 +07:00 [DBG] Starting grant removal
2019-02-12 17:48:43.094 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 17:48:43.098 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 17:48:43.098 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 17:48:43.098 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 17:48:43.098 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 17:48:43.098 +07:00 [DBG] Error Url: /home/error
2019-02-12 17:48:43.098 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 17:48:45.779 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:48:45.789 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:48:45.790 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:48:45.799 +07:00 [DBG] Start discovery request
2019-02-12 17:48:59.916 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 17:48:59.916 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 17:48:59.916 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 17:48:59.917 +07:00 [DBG] Start discovery request
2019-02-12 17:49:00.379 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 17:49:00.380 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 17:49:00.380 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 17:49:00.394 +07:00 [DBG] Start key discovery request
2019-02-12 17:49:00.763 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 17:49:00.775 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 17:49:00.776 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 17:49:00.791 +07:00 [DBG] Start authorize request
2019-02-12 17:49:00.849 +07:00 [DBG] No user present in authorize request
2019-02-12 17:49:00.875 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:49:00.965 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:01.200 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:49:01.285 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvci","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8ARls4BL525HuATxHrUa1356-B_Ia9A6fyIbcaz0QnMGDIph4aMlOlFZGoJHN-ihnI7om2U0UUanuQsrLhgD0-dXQ4-Pai6Te5MFjPCh27ek3JMk9sfLX-yFEM7q7fRdu01W7cPyDsaGo5VBY5no3zuKYowMDg2_1q8gF-k3zgb84qVpOawGxmeHfluetki_9QvtMPEzqhPUYC54Ofw9Y4ccBrNTz2obWofHf0FcmMboArxBwI1HONgFJsQqZQDP6dHn7WHDhWza4YsW4jwKs9jVwpDxD-IqeA7hobTO0seClVtPDuudiPSXVTAPlFt_fR9UFUhEM8eMDZxFT1MySTw","UiLocales":null,"Nonce":"636855653405655806.Yzk4YzhmNGItNzQ5Ni00ZmE4LTkwMzUtMmFkMjY5MmZlOTRlNWQwYmYwOWQtMGQwYy00MzJhLTg0YTItODBkYmY2MWEzNzQ1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvci","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636855653405655806.Yzk4YzhmNGItNzQ5Ni00ZmE4LTkwMzUtMmFkMjY5MmZlOTRlNWQwYmYwOWQtMGQwYy00MzJhLTg0YTItODBkYmY2MWEzNzQ1","state":"CfDJ8ARls4BL525HuATxHrUa1356-B_Ia9A6fyIbcaz0QnMGDIph4aMlOlFZGoJHN-ihnI7om2U0UUanuQsrLhgD0-dXQ4-Pai6Te5MFjPCh27ek3JMk9sfLX-yFEM7q7fRdu01W7cPyDsaGo5VBY5no3zuKYowMDg2_1q8gF-k3zgb84qVpOawGxmeHfluetki_9QvtMPEzqhPUYC54Ofw9Y4ccBrNTz2obWofHf0FcmMboArxBwI1HONgFJsQqZQDP6dHn7WHDhWza4YsW4jwKs9jVwpDxD-IqeA7hobTO0seClVtPDuudiPSXVTAPlFt_fR9UFUhEM8eMDZxFT1MySTw","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 17:49:01.406 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 17:49:01.704 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:49:01.705 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:01.708 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:49:01.715 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:10.447 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:49:10.448 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:10.448 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:49:11.174 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQUJST4M4:00000007","TimeStamp":"2019-02-12T10:49:11.0000000Z","ProcessId":17832,"LocalIpAddress":"127.0.0.1:6279","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:49:11.181 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:49:11.182 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:11.182 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:49:11.183 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:20.862 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:49:20.862 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:20.864 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:49:20.896 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQUJST4M4:00000008","TimeStamp":"2019-02-12T10:49:20.0000000Z","ProcessId":17832,"LocalIpAddress":"127.0.0.1:6279","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:49:20.896 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:49:20.897 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:49:20.897 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:49:20.897 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:15.217 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:15.219 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:15.220 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:15.233 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQUJST4M5:00000001","TimeStamp":"2019-02-12T10:55:15.0000000Z","ProcessId":17832,"LocalIpAddress":"127.0.0.1:6279","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:55:15.234 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:15.234 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:15.235 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:15.235 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:19.832 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:19.832 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:19.832 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:19.834 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQUJST4M5:00000002","TimeStamp":"2019-02-12T10:55:19.0000000Z","ProcessId":17832,"LocalIpAddress":"127.0.0.1:6279","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:55:19.835 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:19.835 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:19.835 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:19.835 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:21.997 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:21.997 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:21.997 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:21.999 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQUJST4M5:00000003","TimeStamp":"2019-02-12T10:55:21.0000000Z","ProcessId":17832,"LocalIpAddress":"127.0.0.1:6279","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:55:22.000 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:22.000 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:22.000 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:22.000 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:26.177 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:26.177 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:26.178 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:26.182 +07:00 [INF] {"Username":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKGQUJST4M5:00000004","TimeStamp":"2019-02-12T10:55:26.0000000Z","ProcessId":17832,"LocalIpAddress":"127.0.0.1:6279","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-12 17:55:26.182 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 17:55:26.183 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:55:26.185 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 17:55:26.186 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 17:58:55.486 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 17:58:56.141 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 17:58:56.141 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 17:58:56.141 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 17:58:56.142 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 17:58:56.142 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 17:58:56.142 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 17:58:56.776 +07:00 [DBG] Starting grant removal
2019-02-12 17:58:57.984 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 17:58:57.990 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 17:58:57.990 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 17:58:57.990 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 17:58:57.990 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 17:58:57.990 +07:00 [DBG] Error Url: /home/error
2019-02-12 17:58:57.991 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 18:00:20.731 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 18:00:21.079 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 18:00:21.080 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 18:00:21.080 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 18:00:21.080 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 18:00:21.080 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 18:00:21.080 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 18:00:21.435 +07:00 [DBG] Starting grant removal
2019-02-12 18:00:21.973 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 18:00:21.985 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 18:00:21.985 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 18:00:21.985 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 18:00:21.985 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 18:00:21.986 +07:00 [DBG] Error Url: /home/error
2019-02-12 18:00:21.986 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 18:00:35.244 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 18:00:35.263 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 18:00:35.264 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 18:00:35.286 +07:00 [DBG] Start discovery request
2019-02-12 18:00:35.949 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 18:00:35.951 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 18:00:35.951 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 18:00:35.965 +07:00 [DBG] Start key discovery request
2019-02-12 18:00:36.200 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:00:36.218 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:00:36.220 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:00:36.238 +07:00 [DBG] Start authorize request
2019-02-12 18:00:36.289 +07:00 [DBG] No user present in authorize request
2019-02-12 18:00:36.304 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:00:36.374 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:36.552 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:00:36.759 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvci","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8ARls4BL525HuATxHrUa13479oyWG6GhfmTqeNDx5PefZsbFE_D0mbgWHLcRVbBVCxN_H8od6Na2s3s3OJ7CXDpBLDIjWyhKuGS329GMbNIsfB7zivMVvYnbfaGoeM9W7c6wFxiZ3Cl4bDjlGAaDbQY-wDsg4Tuqwhu4dHf7dBMu2o48tN1mYG9of7vYX0drU-ZJSGfV7XcII_5clc7J16i8CqQwwdh_RNG7NEN5XL61qemok-q3cim_MKArE_PKHnk46D_WqtbEDDXRxOfmv5maab5QVKgGAWR0mLIN0N3QbQa5pGTu6drNqwOjdp-ii80_91-9vnqZOgm2lz1ngN4","UiLocales":null,"Nonce":"636855660360657988.N2NlNTVkYjEtZmFiNi00Y2MwLWEyMjMtMjk0NzhhZWYyZmI2MjBhMWFlY2MtYmFmMS00OWRjLWE3OWEtYzk5Yjc4YjM2MGM3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvci","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636855660360657988.N2NlNTVkYjEtZmFiNi00Y2MwLWEyMjMtMjk0NzhhZWYyZmI2MjBhMWFlY2MtYmFmMS00OWRjLWE3OWEtYzk5Yjc4YjM2MGM3","state":"CfDJ8ARls4BL525HuATxHrUa13479oyWG6GhfmTqeNDx5PefZsbFE_D0mbgWHLcRVbBVCxN_H8od6Na2s3s3OJ7CXDpBLDIjWyhKuGS329GMbNIsfB7zivMVvYnbfaGoeM9W7c6wFxiZ3Cl4bDjlGAaDbQY-wDsg4Tuqwhu4dHf7dBMu2o48tN1mYG9of7vYX0drU-ZJSGfV7XcII_5clc7J16i8CqQwwdh_RNG7NEN5XL61qemok-q3cim_MKArE_PKHnk46D_WqtbEDDXRxOfmv5maab5QVKgGAWR0mLIN0N3QbQa5pGTu6drNqwOjdp-ii80_91-9vnqZOgm2lz1ngN4","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:00:36.983 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 18:00:37.551 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:00:37.553 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:37.553 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:00:37.567 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:46.371 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:00:46.374 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:46.375 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:00:47.473 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:00:47.478 +07:00 [DBG] Adding idp claim with value: local
2019-02-12 18:00:47.479 +07:00 [DBG] Adding amr claim with value: pwd
2019-02-12 18:00:47.479 +07:00 [DBG] Adding auth_time claim with value: 1549969247
2019-02-12 18:00:47.500 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:00:47.530 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGR546OVTU:00000006","TimeStamp":"2019-02-12T11:00:47.0000000Z","ProcessId":16008,"LocalIpAddress":"127.0.0.1:44039","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 18:00:47.534 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:47.628 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:00:47.629 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:00:47.629 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:00:47.640 +07:00 [DBG] Start authorize callback request
2019-02-12 18:00:47.646 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:00:47.646 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:00:47.646 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:47.646 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:00:47.647 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvci","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8ARls4BL525HuATxHrUa13479oyWG6GhfmTqeNDx5PefZsbFE_D0mbgWHLcRVbBVCxN_H8od6Na2s3s3OJ7CXDpBLDIjWyhKuGS329GMbNIsfB7zivMVvYnbfaGoeM9W7c6wFxiZ3Cl4bDjlGAaDbQY-wDsg4Tuqwhu4dHf7dBMu2o48tN1mYG9of7vYX0drU-ZJSGfV7XcII_5clc7J16i8CqQwwdh_RNG7NEN5XL61qemok-q3cim_MKArE_PKHnk46D_WqtbEDDXRxOfmv5maab5QVKgGAWR0mLIN0N3QbQa5pGTu6drNqwOjdp-ii80_91-9vnqZOgm2lz1ngN4","UiLocales":null,"Nonce":"636855660360657988.N2NlNTVkYjEtZmFiNi00Y2MwLWEyMjMtMjk0NzhhZWYyZmI2MjBhMWFlY2MtYmFmMS00OWRjLWE3OWEtYzk5Yjc4YjM2MGM3","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bb55a5e739aab18c06956687ff7091fb","Raw":{"client_id":"mvci","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636855660360657988.N2NlNTVkYjEtZmFiNi00Y2MwLWEyMjMtMjk0NzhhZWYyZmI2MjBhMWFlY2MtYmFmMS00OWRjLWE3OWEtYzk5Yjc4YjM2MGM3","state":"CfDJ8ARls4BL525HuATxHrUa13479oyWG6GhfmTqeNDx5PefZsbFE_D0mbgWHLcRVbBVCxN_H8od6Na2s3s3OJ7CXDpBLDIjWyhKuGS329GMbNIsfB7zivMVvYnbfaGoeM9W7c6wFxiZ3Cl4bDjlGAaDbQY-wDsg4Tuqwhu4dHf7dBMu2o48tN1mYG9of7vYX0drU-ZJSGfV7XcII_5clc7J16i8CqQwwdh_RNG7NEN5XL61qemok-q3cim_MKArE_PKHnk46D_WqtbEDDXRxOfmv5maab5QVKgGAWR0mLIN0N3QbQa5pGTu6drNqwOjdp-ii80_91-9vnqZOgm2lz1ngN4","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:00:47.649 +07:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-12 18:00:47.651 +07:00 [INF] Showing login: User is not active
2019-02-12 18:00:47.666 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:00:47.666 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:47.666 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:00:47.667 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:55.769 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:00:55.769 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:00:55.771 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:00:55.771 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:01:00.060 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:01:00.061 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:01:00.061 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:01:00.061 +07:00 [DBG] Start authorize request
2019-02-12 18:01:00.062 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:01:00.062 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:01:00.062 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:01:00.062 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:01:00.062 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvci","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"id_token","ResponseMode":"form_post","GrantType":"implicit","RequestedScopes":"openid profile","State":"CfDJ8ARls4BL525HuATxHrUa134P9jw2cojhlJDc07yHP2bK91SkSLV2qauH3ZtPbyn1OtIHNZO36hcjPpADZ8ErELIVNjVZAWqC7qeIZQW7AhD4KQAY7NKAVJ-FTqfXP5jqaQqqwBbkicuPFsqRrnt39l3Alq7SczrxubWacHEi4Qa7btMZbYkSpU-KGqjW_RuqnDPq5p1LAVvCO2Xlv5TcKOkMXB6bHDjg2APE66wkvj-REU4CuRb5GwRMyhxBC_Wi3oanQhvWNfqHcyqq-nmPEuCzH8MzUfM2QbgPZ9gMDY2CZeEHzSBUTd2b4mugTTRePYOckg4-443YuY5fnkaOcHg","UiLocales":null,"Nonce":"636855660599986127.Zjc4ZGMwMjYtMzZlZi00NjhmLThjN2QtNTliYmZjMjJkMTdjZjU4YmRiOWMtZThiYi00NjE0LWIzMzAtYTgxZmI3NWI5NWZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bb55a5e739aab18c06956687ff7091fb","Raw":{"client_id":"mvci","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"id_token","scope":"openid profile","response_mode":"form_post","nonce":"636855660599986127.Zjc4ZGMwMjYtMzZlZi00NjhmLThjN2QtNTliYmZjMjJkMTdjZjU4YmRiOWMtZThiYi00NjE0LWIzMzAtYTgxZmI3NWI5NWZi","state":"CfDJ8ARls4BL525HuATxHrUa134P9jw2cojhlJDc07yHP2bK91SkSLV2qauH3ZtPbyn1OtIHNZO36hcjPpADZ8ErELIVNjVZAWqC7qeIZQW7AhD4KQAY7NKAVJ-FTqfXP5jqaQqqwBbkicuPFsqRrnt39l3Alq7SczrxubWacHEi4Qa7btMZbYkSpU-KGqjW_RuqnDPq5p1LAVvCO2Xlv5TcKOkMXB6bHDjg2APE66wkvj-REU4CuRb5GwRMyhxBC_Wi3oanQhvWNfqHcyqq-nmPEuCzH8MzUfM2QbgPZ9gMDY2CZeEHzSBUTd2b4mugTTRePYOckg4-443YuY5fnkaOcHg","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:01:00.063 +07:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-12 18:01:00.063 +07:00 [INF] Showing login: User is not active
2019-02-12 18:01:00.156 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:01:00.158 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:01:00.158 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:01:00.159 +07:00 [DBG] client configuration validation for client mvci succeeded.
2019-02-12 18:01:46.023 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 18:01:46.023 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 18:01:46.023 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 18:01:46.026 +07:00 [DBG] Start discovery request
2019-02-12 18:01:46.431 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 18:01:46.433 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 18:01:46.436 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 18:01:46.436 +07:00 [DBG] Start key discovery request
2019-02-12 18:01:46.764 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:01:46.766 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:01:46.766 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:01:46.766 +07:00 [DBG] Start authorize request
2019-02-12 18:01:46.766 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:01:46.766 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:01:46.767 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:01:46.767 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:01:46.772 +07:00 [DBG] No PKCE used.
2019-02-12 18:01:46.792 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:01:46.792 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa1376mRPTD5mEPSkAAJltd4cROQ4K0ZP6a0jbLXsSyRKqDmt__MBBZ2WMcw2Q1ZvfYZk-RMymbZtT1A5Z6f3kR7zdhFa5ZXB-DODYCCf5xjDwzxJZp_zogZiCdlssUcEavSdu2NvhpwrsKnXAAEmmHKr8GkIB3EbxL9-M_WCuq5uAZZeBkQ-38lXDW-ado8IbeeIdlmBKC0VZnXGVkN_FzEGYMW4R3kVLnr-UVdhQEY60XKULdQBMsL-Hn-8LCbl-VjKsDD0Ibk7BSlp9O4AWUIKHIR8Yy9Q1m_93ry2UIH7JVG5ffZGrYa6LX32dMfWZ-hM","UiLocales":null,"Nonce":"636855661065784258.YTJjZmEyZmYtZGE5My00YWM4LWFhMmItZGJjZDg2OGE0NDlmODhmY2QxZGItMDcwNS00YWY4LTk1ZGQtMzdjMTZjNjc3MTY5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bb55a5e739aab18c06956687ff7091fb","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855661065784258.YTJjZmEyZmYtZGE5My00YWM4LWFhMmItZGJjZDg2OGE0NDlmODhmY2QxZGItMDcwNS00YWY4LTk1ZGQtMzdjMTZjNjc3MTY5","state":"CfDJ8ARls4BL525HuATxHrUa1376mRPTD5mEPSkAAJltd4cROQ4K0ZP6a0jbLXsSyRKqDmt__MBBZ2WMcw2Q1ZvfYZk-RMymbZtT1A5Z6f3kR7zdhFa5ZXB-DODYCCf5xjDwzxJZp_zogZiCdlssUcEavSdu2NvhpwrsKnXAAEmmHKr8GkIB3EbxL9-M_WCuq5uAZZeBkQ-38lXDW-ado8IbeeIdlmBKC0VZnXGVkN_FzEGYMW4R3kVLnr-UVdhQEY60XKULdQBMsL-Hn-8LCbl-VjKsDD0Ibk7BSlp9O4AWUIKHIR8Yy9Q1m_93ry2UIH7JVG5ffZGrYa6LX32dMfWZ-hM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:01:46.793 +07:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-12 18:01:46.793 +07:00 [INF] Showing login: User is not active
2019-02-12 18:01:46.896 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:01:46.898 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:01:46.898 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:01:46.898 +07:00 [DBG] No PKCE used.
2019-02-12 18:01:46.900 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:01:46.900 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:01:50.560 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:01:50.560 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:01:50.561 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:01:50.561 +07:00 [DBG] Start authorize request
2019-02-12 18:01:50.561 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:01:50.561 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:01:50.561 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:01:50.562 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:01:50.563 +07:00 [DBG] No PKCE used.
2019-02-12 18:01:50.565 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:01:50.565 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135AzI9Pi64EKaFrWkAhot79hpi3Ye3tq5xInVE7foZ2vfzgRAlWHLjewOw-rUSNHrDhIvCrtVsp5HSh5dTaAaEd9G-JC9jwVsMYXxV2sVDe3AcRZQ3q0lNCnvuYMM7Bn3DJ1DXPCx1xH89X1UaSUdnG0h1eHVJBMQtnuHCZwKeZO3yC7jhXjQcTyfSPI71laJohUi5L4bAMYEeCDwDXrXmEO1pU4KRE9p8wv7WSbiEvrBceMX7R477WXutkwjn2IyDH5KGjRu0thSauhlZTpLFef6OAeCAyCoTta81s-zFSu4PufuznrTUM9xZXtCn-LrM","UiLocales":null,"Nonce":"636855661105410988.ODQxYmU5MTAtODFkOC00MmZjLTllNzgtYzcxMjU1ODAwNzExY2IxZjlmZGUtODU0NC00MmQ3LTg3NGYtOTRlNGQ0MTFlNjYw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"bb55a5e739aab18c06956687ff7091fb","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855661105410988.ODQxYmU5MTAtODFkOC00MmZjLTllNzgtYzcxMjU1ODAwNzExY2IxZjlmZGUtODU0NC00MmQ3LTg3NGYtOTRlNGQ0MTFlNjYw","state":"CfDJ8ARls4BL525HuATxHrUa135AzI9Pi64EKaFrWkAhot79hpi3Ye3tq5xInVE7foZ2vfzgRAlWHLjewOw-rUSNHrDhIvCrtVsp5HSh5dTaAaEd9G-JC9jwVsMYXxV2sVDe3AcRZQ3q0lNCnvuYMM7Bn3DJ1DXPCx1xH89X1UaSUdnG0h1eHVJBMQtnuHCZwKeZO3yC7jhXjQcTyfSPI71laJohUi5L4bAMYEeCDwDXrXmEO1pU4KRE9p8wv7WSbiEvrBceMX7R477WXutkwjn2IyDH5KGjRu0thSauhlZTpLFef6OAeCAyCoTta81s-zFSu4PufuznrTUM9xZXtCn-LrM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:01:50.565 +07:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-12 18:01:50.566 +07:00 [INF] Showing login: User is not active
2019-02-12 18:01:50.620 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:01:50.621 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:01:50.622 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:01:50.622 +07:00 [DBG] No PKCE used.
2019-02-12 18:01:50.623 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:01:50.624 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:02:00.097 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:02:00.097 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:02:00.097 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:02:00.098 +07:00 [DBG] No PKCE used.
2019-02-12 18:02:00.098 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:02:00.167 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:02:00.167 +07:00 [DBG] Adding idp claim with value: local
2019-02-12 18:02:00.167 +07:00 [DBG] Adding amr claim with value: pwd
2019-02-12 18:02:00.168 +07:00 [DBG] Adding auth_time claim with value: 1549969320
2019-02-12 18:02:00.169 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:02:00.179 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGR546OVTU:00000013","TimeStamp":"2019-02-12T11:02:00.0000000Z","ProcessId":16008,"LocalIpAddress":"127.0.0.1:44039","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 18:02:00.180 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:02:00.227 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:02:00.228 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:02:00.229 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:02:00.229 +07:00 [DBG] Start authorize callback request
2019-02-12 18:02:00.229 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:02:00.229 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:02:00.229 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:02:00.229 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:02:00.229 +07:00 [DBG] No PKCE used.
2019-02-12 18:02:00.230 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:02:00.230 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135AzI9Pi64EKaFrWkAhot79hpi3Ye3tq5xInVE7foZ2vfzgRAlWHLjewOw-rUSNHrDhIvCrtVsp5HSh5dTaAaEd9G-JC9jwVsMYXxV2sVDe3AcRZQ3q0lNCnvuYMM7Bn3DJ1DXPCx1xH89X1UaSUdnG0h1eHVJBMQtnuHCZwKeZO3yC7jhXjQcTyfSPI71laJohUi5L4bAMYEeCDwDXrXmEO1pU4KRE9p8wv7WSbiEvrBceMX7R477WXutkwjn2IyDH5KGjRu0thSauhlZTpLFef6OAeCAyCoTta81s-zFSu4PufuznrTUM9xZXtCn-LrM","UiLocales":null,"Nonce":"636855661105410988.ODQxYmU5MTAtODFkOC00MmZjLTllNzgtYzcxMjU1ODAwNzExY2IxZjlmZGUtODU0NC00MmQ3LTg3NGYtOTRlNGQ0MTFlNjYw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"7249386480da64d9a61fae3e849f3ed9","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855661105410988.ODQxYmU5MTAtODFkOC00MmZjLTllNzgtYzcxMjU1ODAwNzExY2IxZjlmZGUtODU0NC00MmQ3LTg3NGYtOTRlNGQ0MTFlNjYw","state":"CfDJ8ARls4BL525HuATxHrUa135AzI9Pi64EKaFrWkAhot79hpi3Ye3tq5xInVE7foZ2vfzgRAlWHLjewOw-rUSNHrDhIvCrtVsp5HSh5dTaAaEd9G-JC9jwVsMYXxV2sVDe3AcRZQ3q0lNCnvuYMM7Bn3DJ1DXPCx1xH89X1UaSUdnG0h1eHVJBMQtnuHCZwKeZO3yC7jhXjQcTyfSPI71laJohUi5L4bAMYEeCDwDXrXmEO1pU4KRE9p8wv7WSbiEvrBceMX7R477WXutkwjn2IyDH5KGjRu0thSauhlZTpLFef6OAeCAyCoTta81s-zFSu4PufuznrTUM9xZXtCn-LrM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:02:00.231 +07:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-12 18:02:00.231 +07:00 [INF] Showing login: User is not active
2019-02-12 18:02:00.267 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:02:00.268 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:02:00.268 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:02:00.268 +07:00 [DBG] No PKCE used.
2019-02-12 18:02:00.268 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:02:00.268 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:03:51.404 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-02-12 18:03:51.406 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-02-12 18:03:51.407 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-02-12 18:03:51.410 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKGR546OVTV:00000003","TimeStamp":"2019-02-12T11:03:51.0000000Z","ProcessId":16008,"LocalIpAddress":"127.0.0.1:44039","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-12 18:06:00.240 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 18:06:00.247 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 18:06:00.247 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 18:06:00.247 +07:00 [DBG] Start discovery request
2019-02-12 18:06:00.673 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 18:06:00.675 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 18:06:00.675 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 18:06:00.675 +07:00 [DBG] Start key discovery request
2019-02-12 18:06:00.869 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:06:00.871 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:06:00.872 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:06:00.872 +07:00 [DBG] Start authorize request
2019-02-12 18:06:00.872 +07:00 [DBG] No user present in authorize request
2019-02-12 18:06:00.872 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:06:00.873 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:00.873 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:06:00.873 +07:00 [DBG] No PKCE used.
2019-02-12 18:06:00.877 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:06:00.877 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135HMfVw-_K4jweyprDYl0C-pemObRV0FYX7HIDlHKg3sdO6jP-OaZl3b5Abr-wJMlYbuMvFVoyHZ6zV2GMIS5U1EID1S_xL6dvWjmz_vEjLgmnDpdJBPVd8cgbzQypQut5Tlj_L_pgiQBBtub76_8l3uyTxpxF323KHAmYg6pZUaJytnkagBQo-UjekXLGKaTN0AcP1Xg8uwo4xAeD1auUN00gnYEPycwLPO9zvFoGg03UMf8STDdohOq2iG2dgkCMXUGD2CWl4g3SU_HK33-ZAsFzZBEdokqZIRLEeh8of6RWGiXhgE26rLdLfGlyZ8eI","UiLocales":null,"Nonce":"636855663607480554.YjRhYTFhYTItM2Q4ZC00MDRlLTg1YzQtNjNhMGYzODVlN2UxMzFlNTUxODItOGNlNS00ZmYzLTk4YzctOGI1NjU3OTlhMmFk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855663607480554.YjRhYTFhYTItM2Q4ZC00MDRlLTg1YzQtNjNhMGYzODVlN2UxMzFlNTUxODItOGNlNS00ZmYzLTk4YzctOGI1NjU3OTlhMmFk","state":"CfDJ8ARls4BL525HuATxHrUa135HMfVw-_K4jweyprDYl0C-pemObRV0FYX7HIDlHKg3sdO6jP-OaZl3b5Abr-wJMlYbuMvFVoyHZ6zV2GMIS5U1EID1S_xL6dvWjmz_vEjLgmnDpdJBPVd8cgbzQypQut5Tlj_L_pgiQBBtub76_8l3uyTxpxF323KHAmYg6pZUaJytnkagBQo-UjekXLGKaTN0AcP1Xg8uwo4xAeD1auUN00gnYEPycwLPO9zvFoGg03UMf8STDdohOq2iG2dgkCMXUGD2CWl4g3SU_HK33-ZAsFzZBEdokqZIRLEeh8of6RWGiXhgE26rLdLfGlyZ8eI","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:06:00.882 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 18:06:00.928 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:06:00.928 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:00.931 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:06:00.931 +07:00 [DBG] No PKCE used.
2019-02-12 18:06:00.931 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:06:00.931 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:07.699 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:06:07.700 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:07.700 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:06:07.700 +07:00 [DBG] No PKCE used.
2019-02-12 18:06:07.700 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:06:07.738 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:06:07.739 +07:00 [DBG] Adding idp claim with value: local
2019-02-12 18:06:07.739 +07:00 [DBG] Adding amr claim with value: pwd
2019-02-12 18:06:07.739 +07:00 [DBG] Adding auth_time claim with value: 1549969567
2019-02-12 18:06:07.740 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:06:07.744 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGR546OVU0:00000005","TimeStamp":"2019-02-12T11:06:07.0000000Z","ProcessId":16008,"LocalIpAddress":"127.0.0.1:44039","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 18:06:07.745 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:07.778 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:06:07.779 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:06:07.779 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:06:07.780 +07:00 [DBG] Start authorize callback request
2019-02-12 18:06:07.780 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:06:07.780 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:06:07.780 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:07.780 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:06:07.781 +07:00 [DBG] No PKCE used.
2019-02-12 18:06:07.781 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:06:07.781 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135HMfVw-_K4jweyprDYl0C-pemObRV0FYX7HIDlHKg3sdO6jP-OaZl3b5Abr-wJMlYbuMvFVoyHZ6zV2GMIS5U1EID1S_xL6dvWjmz_vEjLgmnDpdJBPVd8cgbzQypQut5Tlj_L_pgiQBBtub76_8l3uyTxpxF323KHAmYg6pZUaJytnkagBQo-UjekXLGKaTN0AcP1Xg8uwo4xAeD1auUN00gnYEPycwLPO9zvFoGg03UMf8STDdohOq2iG2dgkCMXUGD2CWl4g3SU_HK33-ZAsFzZBEdokqZIRLEeh8of6RWGiXhgE26rLdLfGlyZ8eI","UiLocales":null,"Nonce":"636855663607480554.YjRhYTFhYTItM2Q4ZC00MDRlLTg1YzQtNjNhMGYzODVlN2UxMzFlNTUxODItOGNlNS00ZmYzLTk4YzctOGI1NjU3OTlhMmFk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"40cd367479acfaf0529ca099aaa8cffa","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855663607480554.YjRhYTFhYTItM2Q4ZC00MDRlLTg1YzQtNjNhMGYzODVlN2UxMzFlNTUxODItOGNlNS00ZmYzLTk4YzctOGI1NjU3OTlhMmFk","state":"CfDJ8ARls4BL525HuATxHrUa135HMfVw-_K4jweyprDYl0C-pemObRV0FYX7HIDlHKg3sdO6jP-OaZl3b5Abr-wJMlYbuMvFVoyHZ6zV2GMIS5U1EID1S_xL6dvWjmz_vEjLgmnDpdJBPVd8cgbzQypQut5Tlj_L_pgiQBBtub76_8l3uyTxpxF323KHAmYg6pZUaJytnkagBQo-UjekXLGKaTN0AcP1Xg8uwo4xAeD1auUN00gnYEPycwLPO9zvFoGg03UMf8STDdohOq2iG2dgkCMXUGD2CWl4g3SU_HK33-ZAsFzZBEdokqZIRLEeh8of6RWGiXhgE26rLdLfGlyZ8eI","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:06:07.782 +07:00 [DBG] IsActive called from: AuthorizeEndpoint
2019-02-12 18:06:07.782 +07:00 [INF] Showing login: User is not active
2019-02-12 18:06:07.805 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:06:07.805 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:06:07.806 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:06:07.806 +07:00 [DBG] No PKCE used.
2019-02-12 18:06:07.809 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:06:07.809 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:09:54.015 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-12 18:09:54.389 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-12 18:09:54.389 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-12 18:09:54.389 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-12 18:09:54.390 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-12 18:09:54.390 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-12 18:09:54.390 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-12 18:09:54.676 +07:00 [DBG] Starting grant removal
2019-02-12 18:09:55.299 +07:00 [DBG] Login Url: /Account/Login
2019-02-12 18:09:55.307 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-12 18:09:55.307 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-12 18:09:55.308 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-12 18:09:55.308 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-12 18:09:55.308 +07:00 [DBG] Error Url: /home/error
2019-02-12 18:09:55.308 +07:00 [DBG] Error Id Parameter: errorId
2019-02-12 18:09:58.750 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:09:58.780 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:09:58.780 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:09:58.800 +07:00 [DBG] Start authorize request
2019-02-12 18:09:58.851 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:09:58.872 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:10:03.029 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:03.082 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:03.112 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:10:03.117 +07:00 [DBG] No PKCE used.
2019-02-12 18:10:03.428 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:04.412 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:04.475 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:04.484 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:04.512 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:10:04.556 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa13613djKjLs3elgJJ3P3OQEBF2Gdr3PeIrkDBc262aPGqkoouPbnwsiiNm2HJuHT49bz1IDNIQLBPqSrcdic5h3r1pYTh81eS0D-QUixo8qEvesapynwgdKjF1RQi5Si6PIbmC4JvtlxjDZv3IwHR_60FViZ0btYweCWScHSAX6UbFW6tjonRk5HQhNb3H4Du3KlGsbOiePqitluHOF1r2s8kRzUh9DBlkz70u-ugmvovyDQRh9puRlUz5R6aMVrQJIMyMhKpsn9ZXZovWXLjdfKEeNropQxErBp0COO6kcqme_h_HkTOGlpK2DKpkMREK0","UiLocales":null,"Nonce":"636855665986420345.ZmM3NTVjNjYtZDQ1ZC00YTM5LTk4N2QtZDdmYmJlNDNlMGVjYjYwNDAzNTktMDg5Mi00NDE4LWIwOWEtNTFkMjAxOWNiOGY4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"40cd367479acfaf0529ca099aaa8cffa","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855665986420345.ZmM3NTVjNjYtZDQ1ZC00YTM5LTk4N2QtZDdmYmJlNDNlMGVjYjYwNDAzNTktMDg5Mi00NDE4LWIwOWEtNTFkMjAxOWNiOGY4","state":"CfDJ8ARls4BL525HuATxHrUa13613djKjLs3elgJJ3P3OQEBF2Gdr3PeIrkDBc262aPGqkoouPbnwsiiNm2HJuHT49bz1IDNIQLBPqSrcdic5h3r1pYTh81eS0D-QUixo8qEvesapynwgdKjF1RQi5Si6PIbmC4JvtlxjDZv3IwHR_60FViZ0btYweCWScHSAX6UbFW6tjonRk5HQhNb3H4Du3KlGsbOiePqitluHOF1r2s8kRzUh9DBlkz70u-ugmvovyDQRh9puRlUz5R6aMVrQJIMyMhKpsn9ZXZovWXLjdfKEeNropQxErBp0COO6kcqme_h_HkTOGlpK2DKpkMREK0","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:10:05.224 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:10:05.225 +07:00 [INF] Showing consent: User has not yet consented
2019-02-12 18:10:05.531 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:10:05.562 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:05.562 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:05.562 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:10:05.562 +07:00 [DBG] No PKCE used.
2019-02-12 18:10:05.580 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:05.594 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:05.598 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:05.611 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:05.612 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:10:05.630 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:05.630 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:05.660 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:05.895 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:10.552 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:10:10.577 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:10.577 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:10.577 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:10:10.577 +07:00 [DBG] No PKCE used.
2019-02-12 18:10:10.588 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:10.599 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:10.608 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:10.619 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:10.620 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:10:10.641 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RequestedScopes":["openid","profile","api1","offline_access"],"GrantedScopes":["openid","profile","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKGRAF1MRIF:00000002","TimeStamp":"2019-02-12T11:10:10.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-12 18:10:10.713 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:10.714 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:10.751 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:10:10.753 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:10:10.753 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:10:10.775 +07:00 [DBG] Start authorize callback request
2019-02-12 18:10:10.792 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:10:10.792 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:10:10.813 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:10.814 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:10.814 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:10:10.814 +07:00 [DBG] No PKCE used.
2019-02-12 18:10:10.820 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:10.837 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:10.840 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:10.851 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:10.851 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:10:10.852 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa13613djKjLs3elgJJ3P3OQEBF2Gdr3PeIrkDBc262aPGqkoouPbnwsiiNm2HJuHT49bz1IDNIQLBPqSrcdic5h3r1pYTh81eS0D-QUixo8qEvesapynwgdKjF1RQi5Si6PIbmC4JvtlxjDZv3IwHR_60FViZ0btYweCWScHSAX6UbFW6tjonRk5HQhNb3H4Du3KlGsbOiePqitluHOF1r2s8kRzUh9DBlkz70u-ugmvovyDQRh9puRlUz5R6aMVrQJIMyMhKpsn9ZXZovWXLjdfKEeNropQxErBp0COO6kcqme_h_HkTOGlpK2DKpkMREK0","UiLocales":null,"Nonce":"636855665986420345.ZmM3NTVjNjYtZDQ1ZC00YTM5LTk4N2QtZDdmYmJlNDNlMGVjYjYwNDAzNTktMDg5Mi00NDE4LWIwOWEtNTFkMjAxOWNiOGY4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"40cd367479acfaf0529ca099aaa8cffa","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855665986420345.ZmM3NTVjNjYtZDQ1ZC00YTM5LTk4N2QtZDdmYmJlNDNlMGVjYjYwNDAzNTktMDg5Mi00NDE4LWIwOWEtNTFkMjAxOWNiOGY4","state":"CfDJ8ARls4BL525HuATxHrUa13613djKjLs3elgJJ3P3OQEBF2Gdr3PeIrkDBc262aPGqkoouPbnwsiiNm2HJuHT49bz1IDNIQLBPqSrcdic5h3r1pYTh81eS0D-QUixo8qEvesapynwgdKjF1RQi5Si6PIbmC4JvtlxjDZv3IwHR_60FViZ0btYweCWScHSAX6UbFW6tjonRk5HQhNb3H4Du3KlGsbOiePqitluHOF1r2s8kRzUh9DBlkz70u-ugmvovyDQRh9puRlUz5R6aMVrQJIMyMhKpsn9ZXZovWXLjdfKEeNropQxErBp0COO6kcqme_h_HkTOGlpK2DKpkMREK0","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:10:10.868 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:10:10.892 +07:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:10:10.905 +07:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:10:10.956 +07:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:10:11.263 +07:00 [DBG] H+vfvAzXXuecKvZD1S1KSufvcfyjmSlN5SV22Z8lcho= not found in database
2019-02-12 18:10:11.425 +07:00 [DBG] Creating Hybrid Flow response.
2019-02-12 18:10:11.468 +07:00 [DBG] pXiB7ZX6VtF+WuwchG4Tur9K82x4VO9bCSHod8K/WtE= not found in database
2019-02-12 18:10:11.482 +07:00 [DBG] Creating Implicit Flow response.
2019-02-12 18:10:11.501 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:10:11.505 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:10:11.657 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****_-Uw","$type":"Token"},{"TokenType":"code","TokenValue":"****f417","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRIE:00000002","TimeStamp":"2019-02-12T11:10:11.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:10:11.661 +07:00 [INF] Authorize endpoint response
{"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8ARls4BL525HuATxHrUa13613djKjLs3elgJJ3P3OQEBF2Gdr3PeIrkDBc262aPGqkoouPbnwsiiNm2HJuHT49bz1IDNIQLBPqSrcdic5h3r1pYTh81eS0D-QUixo8qEvesapynwgdKjF1RQi5Si6PIbmC4JvtlxjDZv3IwHR_60FViZ0btYweCWScHSAX6UbFW6tjonRk5HQhNb3H4Du3KlGsbOiePqitluHOF1r2s8kRzUh9DBlkz70u-ugmvovyDQRh9puRlUz5R6aMVrQJIMyMhKpsn9ZXZovWXLjdfKEeNropQxErBp0COO6kcqme_h_HkTOGlpK2DKpkMREK0","Scope":"openid profile api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-12 18:10:11.720 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:10:11.740 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:10:12.189 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 18:10:12.205 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 18:10:12.206 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 18:10:12.240 +07:00 [DBG] Start token request.
2019-02-12 18:10:12.268 +07:00 [DBG] Start client validation
2019-02-12 18:10:12.287 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 18:10:12.302 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 18:10:12.303 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 18:10:12.304 +07:00 [DBG] Secret id found: mvc
2019-02-12 18:10:12.335 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:12.335 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:12.359 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 18:10:12.360 +07:00 [DBG] Client validation success
2019-02-12 18:10:12.360 +07:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGRAF1MRID:00000002","TimeStamp":"2019-02-12T11:10:12.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 18:10:12.378 +07:00 [DBG] Start token request validation
2019-02-12 18:10:12.408 +07:00 [DBG] Start validation of authorization code token request
2019-02-12 18:10:12.461 +07:00 [DBG] pXiB7ZX6VtF+WuwchG4Tur9K82x4VO9bCSHod8K/WtE= found in database: true
2019-02-12 18:10:12.497 +07:00 [DBG] removing pXiB7ZX6VtF+WuwchG4Tur9K82x4VO9bCSHod8K/WtE= persisted grant from database
2019-02-12 18:10:12.525 +07:00 [DBG] Validation of authorization code token request success
2019-02-12 18:10:12.538 +07:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"625cc7efbe47c85404959865cbcb95f0737bf63e4b6a563685268a5c232ef417","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"625cc7efbe47c85404959865cbcb95f0737bf63e4b6a563685268a5c232ef417","grant_type":"authorization_code","redirect_uri":"http://localhost:5002/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-12 18:10:12.602 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:12.602 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:12.606 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:12.617 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:12.637 +07:00 [DBG] Getting claims for access token for client: mvc
2019-02-12 18:10:12.639 +07:00 [DBG] Getting claims for access token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:10:12.953 +07:00 [DBG] Creating refresh token
2019-02-12 18:10:12.953 +07:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-12 18:10:13.003 +07:00 [DBG] WmPFObLHgR9rU0+VOP9v04r1lytY7w1xZ8b83IjKVnA= not found in database
2019-02-12 18:10:13.088 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:13.088 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:13.109 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:13.364 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:13.364 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:10:13.365 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:10:13.382 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****nHlw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****a12c","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Ub8Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRID:00000002","TimeStamp":"2019-02-12T11:10:13.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:10:13.385 +07:00 [DBG] Token request success.
2019-02-12 18:10:13.431 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-12 18:10:13.434 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-12 18:10:13.434 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-12 18:10:13.454 +07:00 [DBG] Start userinfo request
2019-02-12 18:10:13.464 +07:00 [DBG] Bearer token found in header
2019-02-12 18:10:13.680 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:13.680 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:13.695 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:13.695 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:13.707 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:10:13.713 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549969812,"exp":1549973412,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"mvc","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549969567,"idp":"local","scope":["openid","profile","api1","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:10:13.736 +07:00 [DBG] Creating userinfo response
2019-02-12 18:10:13.746 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:10:13.751 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:10:13.769 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:13.770 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-12 18:10:13.771 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:10:13.777 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:13.789 +07:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-02-12 18:10:13.790 +07:00 [DBG] End userinfo request
2019-02-12 18:10:45.293 +07:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-02-12 18:10:45.297 +07:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-02-12 18:10:45.305 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-02-12 18:10:45.344 +07:00 [DBG] Processing signout request for afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:10:45.380 +07:00 [DBG] Start end session request validation
2019-02-12 18:10:45.427 +07:00 [DBG] Start identity token validation
2019-02-12 18:10:45.546 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:45.546 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:45.546 +07:00 [DBG] Client found: mvc / MVC Client
2019-02-12 18:10:45.568 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:10:45.573 +07:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549969813,"exp":1549970113,"iss":"http://localhost:5000","aud":"mvc","nonce":"636855665986420345.ZmM3NTVjNjYtZDQ1ZC00YTM5LTk4N2QtZDdmYmJlNDNlMGVjYjYwNDAzNTktMDg5Mi00NDE4LWIwOWEtNTFkMjAxOWNiOGY4","iat":1549969813,"at_hash":"5Z6sd1nxR784ZO009HE6tg","sid":"40cd367479acfaf0529ca099aaa8cffa","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549969567,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:10:45.588 +07:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8ARls4BL525HuATxHrUa134HbQxQtAddKXoyz4ObVoFG3s2c_sutE-OVSgELgmpxIpACr05EiNVdYtDhhKQe2AP0O7w4vgB88dEHD9vF0VU8BH8nC4NiJ6ZmiPhcJUIUqhHxAUFsAjIOTBnnSUnTdrZPNJFXbQMPN1aCtsVRiw7P","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjU2OTQxNjhlNWUxMDQ1ZTNmYjVkYWE2YjY1OWRhMWVlIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDk5Njk4MTMsImV4cCI6MTU0OTk3MDExMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjIiwibm9uY2UiOiI2MzY4NTU2NjU5ODY0MjAzNDUuWm1NM05UVmpOall0WkRRMVpDMDBZVE01TFRrNE4yUXRaRGRtWW1KbE5ETmxNR1ZqWWpZd05EQXpOVGt0TURnNU1pMDBOREU0TFdJd09XRXROVEZrTWpBeE9XTmlPR1k0IiwiaWF0IjoxNTQ5OTY5ODEzLCJhdF9oYXNoIjoiNVo2c2QxbnhSNzg0Wk8wMDlIRTZ0ZyIsInNpZCI6IjQwY2QzNjc0NzlhY2ZhZjA1MjljYTA5OWFhYThjZmZhIiwic3ViIjoiYWZhYTNkMDItMTFmZC00MjJkLTg4MjMtZTRiMmZlMzdiZmU0IiwiYXV0aF90aW1lIjoxNTQ5OTY5NTY3LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.zgOcehLV6rl_Ar1c_trNckFjNQesKGqmyZot7whgI-cKBqQVQ4SltO5GOGtyAEkhLgoz1v0RzJiKK0aRPUHA15JW4-ZHnLAANCHB2opmphntYIRNBXfzOJCDsWKIYiYINULnVEyFqJtGy3BJyViFs1nW6xj_g5LNnCHSnms4jmS-_3bQnlyIz3gpBY12KLO7X8htGgSjsUEBwDZF9V2-Aggb21ZXxmF90ZLm4T1usfijNzMONpqcowE4u7dbQa5PJNMLxE0Pp9PK3w-Yqi_jK_wbZaEHC7GFSEDMJuxhcmBesSCD1WEPZklXu9q4P1yCEVnSmWZmPXEASJF190nHlw","state":"CfDJ8ARls4BL525HuATxHrUa134HbQxQtAddKXoyz4ObVoFG3s2c_sutE-OVSgELgmpxIpACr05EiNVdYtDhhKQe2AP0O7w4vgB88dEHD9vF0VU8BH8nC4NiJ6ZmiPhcJUIUqhHxAUFsAjIOTBnnSUnTdrZPNJFXbQMPN1aCtsVRiw7P","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-02-12 18:10:45.593 +07:00 [DBG] Success validating end session request from mvc
2019-02-12 18:10:45.794 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-02-12 18:10:45.796 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-02-12 18:10:45.801 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-02-12 18:10:45.802 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKGRAF1MRIB:00000003","TimeStamp":"2019-02-12T11:10:45.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-12 18:10:46.053 +07:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-02-12 18:10:46.057 +07:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-02-12 18:10:46.057 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-02-12 18:10:46.091 +07:00 [DBG] Processing signout callback request
2019-02-12 18:10:46.235 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:46.236 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:46.236 +07:00 [DBG] No client front-channel logout URLs
2019-02-12 18:10:46.236 +07:00 [DBG] No client back-channel logout URLs
2019-02-12 18:10:46.236 +07:00 [INF] Successful signout callback.
2019-02-12 18:10:46.236 +07:00 [DBG] No client front-channel iframe urls
2019-02-12 18:10:46.236 +07:00 [DBG] No client back-channel iframe urls
2019-02-12 18:10:49.692 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:10:49.697 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:10:49.701 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:10:49.701 +07:00 [DBG] Start authorize request
2019-02-12 18:10:49.702 +07:00 [DBG] No user present in authorize request
2019-02-12 18:10:49.702 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:10:49.784 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:49.784 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:49.784 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:10:49.784 +07:00 [DBG] No PKCE used.
2019-02-12 18:10:49.826 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:50.202 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:50.207 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:50.229 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:50.229 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:10:50.230 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","UiLocales":null,"Nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","state":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:10:50.231 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 18:10:50.316 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:10:50.390 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:50.390 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:10:50.391 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:10:50.391 +07:00 [DBG] No PKCE used.
2019-02-12 18:10:50.401 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:50.415 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:50.420 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:10:50.432 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:10:50.433 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:10:50.455 +07:00 [DBG] mvc found in database: true
2019-02-12 18:10:50.455 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:00.348 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:00.364 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:00.364 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:00.364 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:00.365 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:00.371 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.378 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:00.381 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.392 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:00.392 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:00.511 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:11:00.512 +07:00 [DBG] Adding idp claim with value: local
2019-02-12 18:11:00.512 +07:00 [DBG] Adding amr claim with value: pwd
2019-02-12 18:11:00.512 +07:00 [DBG] Adding auth_time claim with value: 1549969860
2019-02-12 18:11:00.515 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:11:00.529 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGRAF1MRIA:00000005","TimeStamp":"2019-02-12T11:11:00.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 18:11:00.536 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:00.536 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:00.581 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:11:00.581 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:11:00.581 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:11:00.582 +07:00 [DBG] Start authorize callback request
2019-02-12 18:11:00.582 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:11:00.582 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:00.612 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:00.612 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:00.613 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:00.613 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:00.619 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.631 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:00.635 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.645 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:00.645 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:00.645 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","UiLocales":null,"Nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"441051f16956f70be3d0e5a005bb8f92","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","state":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:11:00.653 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:11:00.653 +07:00 [INF] Showing consent: User has not yet consented
2019-02-12 18:11:00.674 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:00.691 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:00.691 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:00.691 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:00.691 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:00.697 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.710 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:00.714 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.726 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:00.726 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:00.734 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:00.735 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:00.749 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:00.877 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:08.686 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:08.706 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:08.707 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:08.707 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:08.707 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:08.714 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:08.725 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:08.733 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:08.740 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:08.741 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:08.741 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RequestedScopes":["openid","profile","api1","offline_access"],"GrantedScopes":["openid","profile","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKGRAF1MRIF:00000004","TimeStamp":"2019-02-12T11:11:08.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-12 18:11:08.752 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:08.752 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:08.772 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:11:08.772 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:11:08.772 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:11:08.772 +07:00 [DBG] Start authorize callback request
2019-02-12 18:11:08.773 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:11:08.773 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:08.787 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:08.787 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:08.787 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:08.787 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:08.791 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:08.802 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:08.805 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:08.814 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:08.815 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:08.815 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","UiLocales":null,"Nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"441051f16956f70be3d0e5a005bb8f92","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","state":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:11:08.818 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:11:08.818 +07:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:11:08.819 +07:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:11:08.819 +07:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:11:08.822 +07:00 [DBG] H+vfvAzXXuecKvZD1S1KSufvcfyjmSlN5SV22Z8lcho= found in database
2019-02-12 18:11:08.835 +07:00 [DBG] Creating Hybrid Flow response.
2019-02-12 18:11:08.837 +07:00 [DBG] GdnhuNaCE9I57R6SbyqwlwFePV1/aWCUXRVlRe8HTHc= not found in database
2019-02-12 18:11:08.840 +07:00 [DBG] Creating Implicit Flow response.
2019-02-12 18:11:08.841 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:11:08.841 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:11:08.849 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****CvOQ","$type":"Token"},{"TokenType":"code","TokenValue":"****5a53","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRIE:00000004","TimeStamp":"2019-02-12T11:11:08.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:11:08.849 +07:00 [INF] Authorize endpoint response
{"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8ARls4BL525HuATxHrUa134oQ1TPoYqojzCW-y0NIMEKCpGmDuEgRoulimgX61ZcyQb7HvHhieZC-riOC5pJHfyQ1jRCKGBxA5HXt6JwBF1PPs5OnI2-4wQ_JJUVlqW8POJxqeeInrLLkqGOUcjE4gxWpQVIlH7lFc5NmjbZ2va8vtxygPR4Vr2AEtKHCsXx247C4ixosCtqJewipDp6ptxwmKhlnNby6oJ9R1xELAHihZKxrgTM63FkcWBFa2Y6CyK2C16TghojFtPt-ddg8oHbwnAdwszxD-GjXPRbSfcS6JYQztvOtAPE8vEg1H_4w0Q9atE8zWuv19Po91t09bo","Scope":"openid profile api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-12 18:11:08.850 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:11:08.850 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:11:09.294 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 18:11:09.304 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 18:11:09.304 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 18:11:09.305 +07:00 [DBG] Start token request.
2019-02-12 18:11:09.305 +07:00 [DBG] Start client validation
2019-02-12 18:11:09.305 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 18:11:09.305 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 18:11:09.307 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 18:11:09.309 +07:00 [DBG] Secret id found: mvc
2019-02-12 18:11:09.472 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:09.472 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:09.472 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 18:11:09.473 +07:00 [DBG] Client validation success
2019-02-12 18:11:09.473 +07:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGRAF1MRID:00000004","TimeStamp":"2019-02-12T11:11:09.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 18:11:09.473 +07:00 [DBG] Start token request validation
2019-02-12 18:11:09.473 +07:00 [DBG] Start validation of authorization code token request
2019-02-12 18:11:09.490 +07:00 [DBG] GdnhuNaCE9I57R6SbyqwlwFePV1/aWCUXRVlRe8HTHc= found in database: true
2019-02-12 18:11:09.497 +07:00 [DBG] removing GdnhuNaCE9I57R6SbyqwlwFePV1/aWCUXRVlRe8HTHc= persisted grant from database
2019-02-12 18:11:09.557 +07:00 [DBG] Validation of authorization code token request success
2019-02-12 18:11:09.561 +07:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"21066b492acdcb79b0a19ecc83321eb48bb549f2dfaa91ad1dc76b6b69275a53","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"21066b492acdcb79b0a19ecc83321eb48bb549f2dfaa91ad1dc76b6b69275a53","grant_type":"authorization_code","redirect_uri":"http://localhost:5002/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-12 18:11:09.606 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:09.606 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:09.620 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:09.634 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:09.634 +07:00 [DBG] Getting claims for access token for client: mvc
2019-02-12 18:11:09.634 +07:00 [DBG] Getting claims for access token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:11:09.654 +07:00 [DBG] Creating refresh token
2019-02-12 18:11:09.654 +07:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-12 18:11:09.664 +07:00 [DBG] hWjcPwstw3e+H94AMFdVY3IPBCz/xr7XeibglusD2XA= not found in database
2019-02-12 18:11:09.686 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:09.687 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:09.701 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:09.717 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:09.718 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:11:09.718 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:11:09.731 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****K0Qg","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****cda1","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Si4A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRID:00000004","TimeStamp":"2019-02-12T11:11:09.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:11:09.731 +07:00 [DBG] Token request success.
2019-02-12 18:11:09.787 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-12 18:11:09.789 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-12 18:11:09.789 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-12 18:11:09.790 +07:00 [DBG] Start userinfo request
2019-02-12 18:11:09.790 +07:00 [DBG] Bearer token found in header
2019-02-12 18:11:09.876 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:09.876 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:09.939 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:09.939 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:09.964 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:11:09.969 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549969869,"exp":1549973469,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"mvc","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549969860,"idp":"local","scope":["openid","profile","api1","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:11:09.969 +07:00 [DBG] Creating userinfo response
2019-02-12 18:11:09.969 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:11:09.969 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:11:09.976 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:09.977 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-12 18:11:09.977 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:11:09.991 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:10.004 +07:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-02-12 18:11:10.004 +07:00 [DBG] End userinfo request
2019-02-12 18:11:30.637 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:30.692 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:30.693 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:30.693 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:30.693 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:30.707 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:30.889 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:30.893 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:30.901 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:30.901 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:30.913 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:30.913 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:30.923 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:31.182 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:33.501 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:33.513 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:33.513 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:33.513 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:33.514 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:33.518 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:33.531 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:33.534 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:33.543 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:33.543 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:33.552 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:33.552 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:37.675 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-02-12 18:11:37.675 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-02-12 18:11:37.676 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-02-12 18:11:37.677 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKGRAF1MRIE:00000005","TimeStamp":"2019-02-12T11:11:37.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-12 18:11:37.796 +07:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-02-12 18:11:37.797 +07:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-02-12 18:11:37.798 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-02-12 18:11:37.798 +07:00 [DBG] Processing signout callback request
2019-02-12 18:11:37.828 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:37.828 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:37.828 +07:00 [DBG] No client front-channel logout URLs
2019-02-12 18:11:37.828 +07:00 [DBG] No client back-channel logout URLs
2019-02-12 18:11:37.828 +07:00 [INF] Successful signout callback.
2019-02-12 18:11:37.828 +07:00 [DBG] No client front-channel iframe urls
2019-02-12 18:11:37.828 +07:00 [DBG] No client back-channel iframe urls
2019-02-12 18:11:50.305 +07:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-02-12 18:11:50.307 +07:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-02-12 18:11:50.307 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-02-12 18:11:50.308 +07:00 [DBG] Processing signout request for anonymous
2019-02-12 18:11:50.308 +07:00 [DBG] Start end session request validation
2019-02-12 18:11:50.308 +07:00 [DBG] Start identity token validation
2019-02-12 18:11:50.335 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:50.335 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:50.335 +07:00 [DBG] Client found: mvc / MVC Client
2019-02-12 18:11:50.363 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:11:50.364 +07:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549969869,"exp":1549970169,"iss":"http://localhost:5000","aud":"mvc","nonce":"636855666496713678.Y2IzYmY4ODItMWM1My00ZmNiLWI2YWItOWJkMDZmMmZkMzY1YjcyNzhlZjAtZDdmNi00OTY0LTg5ODYtM2JjOGQwODZkMjIw","iat":1549969869,"at_hash":"n07lI5bVo09oz3CtbtrSUg","sid":"441051f16956f70be3d0e5a005bb8f92","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549969860,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:11:50.364 +07:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"unknown","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8ARls4BL525HuATxHrUa136YijdKnIBeBhGYKXREk5-L544WZo6FqfdW9SPz4hHSUhGtFkWNcB9bFgtb_KZOcfYt1WnuZ2blfMIq6hFz0MuQaH9rhlxXVOvf-V1d_gT76LRGSOwqGL_BQAY9zRs1UpnALYzghygswjHQizLkr_wZ","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjU2OTQxNjhlNWUxMDQ1ZTNmYjVkYWE2YjY1OWRhMWVlIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDk5Njk4NjksImV4cCI6MTU0OTk3MDE2OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjIiwibm9uY2UiOiI2MzY4NTU2NjY0OTY3MTM2NzguWTJJelltWTRPREl0TVdNMU15MDBabU5pTFdJMllXSXRPV0prTURabU1tWmtNelkxWWpjeU56aGxaakF0WkRkbU5pMDBPVFkwTFRnNU9EWXRNMkpqT0dRd09EWmtNakl3IiwiaWF0IjoxNTQ5OTY5ODY5LCJhdF9oYXNoIjoibjA3bEk1YlZvMDlvejNDdGJ0clNVZyIsInNpZCI6IjQ0MTA1MWYxNjk1NmY3MGJlM2QwZTVhMDA1YmI4ZjkyIiwic3ViIjoiYWZhYTNkMDItMTFmZC00MjJkLTg4MjMtZTRiMmZlMzdiZmU0IiwiYXV0aF90aW1lIjoxNTQ5OTY5ODYwLCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.bJoiqG-Ntzwn2MVGicAQ0-Kl0SKuRXGrz9DRfjFLWBfuQGS3vAYuIvhoxeLRn5tl-W4UNEPMk5MGMMg3F8gXdlUTzxeQ6jtNlX5TdfHABFVqqqWtwk1wZCanF93-jedyVDHfb_thKYuC4fWYIQ68NJG8Dhef3PMrxZJslEawebxW_qM5u_NRL_1QIkXhYPnJuG6d7VKMce6gi84cMfrUIViYzYb9Klw7klMJI0hozSSQhw4E4QfCUbKPklqSYulh2x3NDugsfOTQOS343HWXMR-g8NuxTLLjpEf4p5KbgMZLYqbmHJDqDbrIuj7b83dC5q98XqUKyymp8dq4YOK0Qg","state":"CfDJ8ARls4BL525HuATxHrUa136YijdKnIBeBhGYKXREk5-L544WZo6FqfdW9SPz4hHSUhGtFkWNcB9bFgtb_KZOcfYt1WnuZ2blfMIq6hFz0MuQaH9rhlxXVOvf-V1d_gT76LRGSOwqGL_BQAY9zRs1UpnALYzghygswjHQizLkr_wZ","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-02-12 18:11:50.365 +07:00 [DBG] Success validating end session request from mvc
2019-02-12 18:11:55.499 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:11:55.500 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:11:55.501 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:11:55.501 +07:00 [DBG] Start authorize request
2019-02-12 18:11:55.501 +07:00 [DBG] No user present in authorize request
2019-02-12 18:11:55.501 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:55.542 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:55.543 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:55.543 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:55.543 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:55.549 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:55.563 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:55.568 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:55.593 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:55.593 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:55.594 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa1354kuY6iKiUVxpFcGQ6oR27DJ8Afor7edZL9R1TORVcFjor8YTf8cwauvWuksdVPw33-DHqkC_ny9hDDLmUkUbCikMG4nxHj-HRuTRQ7OqUv7Uo_npxGQlJSSI7eAQGYaW7-3hftGtIlN3lOAkpdoCv0Y5yM-deYi-us_x1IaQaakJuRTCJf9nIGTL7wC8drMTIwjc4_5LxfD7L8x8KWK22n0KliuOIghYhAe1wlTb7cIhXTi5T9GGg3zE9IxOVSY2LloBEtotlKgPSJCnP_9nY0rgWH1kV2bfb2VyJ9l6Jk0E4v99XbNYMqC0-7Wcm_cE","UiLocales":null,"Nonce":"636855667154779787.MDMwZjc3NjQtNmYzZS00NGNhLWEyMWUtYjQ1OTk2YmM3MzIxN2U4MmQ0ZWMtYjJkZC00OTE1LWFlZjEtYmRkODg2OTQwZWMy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855667154779787.MDMwZjc3NjQtNmYzZS00NGNhLWEyMWUtYjQ1OTk2YmM3MzIxN2U4MmQ0ZWMtYjJkZC00OTE1LWFlZjEtYmRkODg2OTQwZWMy","state":"CfDJ8ARls4BL525HuATxHrUa1354kuY6iKiUVxpFcGQ6oR27DJ8Afor7edZL9R1TORVcFjor8YTf8cwauvWuksdVPw33-DHqkC_ny9hDDLmUkUbCikMG4nxHj-HRuTRQ7OqUv7Uo_npxGQlJSSI7eAQGYaW7-3hftGtIlN3lOAkpdoCv0Y5yM-deYi-us_x1IaQaakJuRTCJf9nIGTL7wC8drMTIwjc4_5LxfD7L8x8KWK22n0KliuOIghYhAe1wlTb7cIhXTi5T9GGg3zE9IxOVSY2LloBEtotlKgPSJCnP_9nY0rgWH1kV2bfb2VyJ9l6Jk0E4v99XbNYMqC0-7Wcm_cE","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:11:55.594 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 18:11:55.634 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:11:55.660 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:55.660 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:55.661 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:11:55.661 +07:00 [DBG] No PKCE used.
2019-02-12 18:11:55.667 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:55.687 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:55.700 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:11:55.715 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:11:55.716 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:11:55.731 +07:00 [DBG] mvc found in database: true
2019-02-12 18:11:55.731 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:11:57.049 +07:00 [INF] AuthenticationScheme: Google was challenged.
2019-02-12 18:12:00.171 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:12:00.181 +07:00 [DBG] mvc found in database: true
2019-02-12 18:12:00.181 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:12:00.181 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:12:00.181 +07:00 [DBG] No PKCE used.
2019-02-12 18:12:00.189 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:12:00.195 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:12:00.200 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:12:00.207 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:12:00.207 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:12:00.213 +07:00 [DBG] mvc found in database: true
2019-02-12 18:12:00.214 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:14:43.834 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:14:43.835 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:14:43.835 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:14:43.835 +07:00 [DBG] Start authorize request
2019-02-12 18:14:43.838 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:14:43.838 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:14:43.998 +07:00 [DBG] mvc found in database: true
2019-02-12 18:14:43.999 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:14:43.999 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:14:43.999 +07:00 [DBG] No PKCE used.
2019-02-12 18:14:44.031 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:44.636 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:44.648 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:44.668 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:44.668 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:14:44.669 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa134CnIDaq-FrKeEvF-6B0QOjNNs2WDK7_quMV-9lSt5NT9bzte4L3zPcWLKdSh9FzwXtcFyj3ucZLYlcnB6DDJFGDghaWAC-h-7eJ2gexaOWoN-yO4uHSAdYBXLZRcDqKePb3muFx931crbHVWRBfVWkV_IOMf6I0Bd67H7kQs4ZoMtTG-H-wMsWRoosYFzS0YSvRpC5yOrPv5xx61iLV4iHwSstTLc7FjRLc4uQLfAvS4JKxf8pPPeEPzhhkvAn3zdaQWuLzk05PeXzdx_VD5w0V2hZ91r4A5ChQ4L1A72uH13JmxdZWUrbycRFpB7e_UE","UiLocales":null,"Nonce":"636855668838049674.Mzc2ZjQ5MDktYjNkNi00ODQ2LWFmODYtYzliMmQyYTNhNjE2MjdmYTY0YTQtNmUxNy00Njc2LWE4NmQtZGIwNDQ2NjI2OTc5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"40cd367479acfaf0529ca099aaa8cffa","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855668838049674.Mzc2ZjQ5MDktYjNkNi00ODQ2LWFmODYtYzliMmQyYTNhNjE2MjdmYTY0YTQtNmUxNy00Njc2LWE4NmQtZGIwNDQ2NjI2OTc5","state":"CfDJ8ARls4BL525HuATxHrUa134CnIDaq-FrKeEvF-6B0QOjNNs2WDK7_quMV-9lSt5NT9bzte4L3zPcWLKdSh9FzwXtcFyj3ucZLYlcnB6DDJFGDghaWAC-h-7eJ2gexaOWoN-yO4uHSAdYBXLZRcDqKePb3muFx931crbHVWRBfVWkV_IOMf6I0Bd67H7kQs4ZoMtTG-H-wMsWRoosYFzS0YSvRpC5yOrPv5xx61iLV4iHwSstTLc7FjRLc4uQLfAvS4JKxf8pPPeEPzhhkvAn3zdaQWuLzk05PeXzdx_VD5w0V2hZ91r4A5ChQ4L1A72uH13JmxdZWUrbycRFpB7e_UE","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:14:44.684 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:14:44.685 +07:00 [INF] Showing consent: User has not yet consented
2019-02-12 18:14:44.730 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:14:44.741 +07:00 [DBG] mvc found in database: true
2019-02-12 18:14:44.742 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:14:44.742 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:14:44.742 +07:00 [DBG] No PKCE used.
2019-02-12 18:14:44.748 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:44.758 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:44.766 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:44.788 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:44.788 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:14:44.803 +07:00 [DBG] mvc found in database: true
2019-02-12 18:14:44.804 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:14:44.828 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:45.143 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:52.178 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-02-12 18:14:52.179 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-02-12 18:14:52.179 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-02-12 18:14:52.179 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKGRAF1MRIG:00000005","TimeStamp":"2019-02-12T11:14:52.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-12 18:14:59.540 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:14:59.542 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:14:59.543 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:14:59.543 +07:00 [DBG] Start authorize request
2019-02-12 18:14:59.543 +07:00 [DBG] No user present in authorize request
2019-02-12 18:14:59.543 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:14:59.570 +07:00 [DBG] mvc found in database: true
2019-02-12 18:14:59.570 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:14:59.570 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:14:59.570 +07:00 [DBG] No PKCE used.
2019-02-12 18:14:59.574 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:59.588 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:59.593 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:59.601 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:59.602 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:14:59.603 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","UiLocales":null,"Nonce":"636855668995179731.Mjg5MWM2NzQtNThlNi00MGM2LWE0ZjUtNWU3ZmQ1ODRlYjFkYzY0ZWVhMTItY2NiNC00MWE2LTk1NTYtOWYwNjYxNmQyYjEz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855668995179731.Mjg5MWM2NzQtNThlNi00MGM2LWE0ZjUtNWU3ZmQ1ODRlYjFkYzY0ZWVhMTItY2NiNC00MWE2LTk1NTYtOWYwNjYxNmQyYjEz","state":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:14:59.604 +07:00 [INF] Showing login: User is not authenticated
2019-02-12 18:14:59.643 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:14:59.658 +07:00 [DBG] mvc found in database: true
2019-02-12 18:14:59.658 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:14:59.659 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:14:59.659 +07:00 [DBG] No PKCE used.
2019-02-12 18:14:59.665 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:59.673 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:59.681 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:14:59.687 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:14:59.687 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:14:59.700 +07:00 [DBG] mvc found in database: true
2019-02-12 18:14:59.700 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:06.434 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:15:06.477 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:06.477 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:06.477 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:15:06.477 +07:00 [DBG] No PKCE used.
2019-02-12 18:15:06.497 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.514 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:06.523 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.543 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:06.544 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:15:06.600 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:15:06.601 +07:00 [DBG] Adding idp claim with value: local
2019-02-12 18:15:06.601 +07:00 [DBG] Adding amr claim with value: pwd
2019-02-12 18:15:06.601 +07:00 [DBG] Adding auth_time claim with value: 1549970106
2019-02-12 18:15:06.607 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:15:06.613 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKGRAF1MRIG:00000009","TimeStamp":"2019-02-12T11:15:06.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-12 18:15:06.634 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:06.634 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:06.668 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:15:06.672 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:15:06.672 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:15:06.672 +07:00 [DBG] Start authorize callback request
2019-02-12 18:15:06.672 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:15:06.672 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:15:06.712 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:06.713 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:06.713 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:15:06.713 +07:00 [DBG] No PKCE used.
2019-02-12 18:15:06.718 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.733 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:06.743 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.750 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:06.751 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:15:06.751 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","UiLocales":null,"Nonce":"636855668995179731.Mjg5MWM2NzQtNThlNi00MGM2LWE0ZjUtNWU3ZmQ1ODRlYjFkYzY0ZWVhMTItY2NiNC00MWE2LTk1NTYtOWYwNjYxNmQyYjEz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1875252e963b8b8cd26f40ada83140a8","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855668995179731.Mjg5MWM2NzQtNThlNi00MGM2LWE0ZjUtNWU3ZmQ1ODRlYjFkYzY0ZWVhMTItY2NiNC00MWE2LTk1NTYtOWYwNjYxNmQyYjEz","state":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:15:06.756 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:15:06.756 +07:00 [INF] Showing consent: User has not yet consented
2019-02-12 18:15:06.780 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:15:06.788 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:06.788 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:06.788 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:15:06.788 +07:00 [DBG] No PKCE used.
2019-02-12 18:15:06.796 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.802 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:06.809 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.815 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:06.815 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:15:06.825 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:06.825 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:06.828 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:06.833 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.371 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:15:09.386 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.386 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.386 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:15:09.386 +07:00 [DBG] No PKCE used.
2019-02-12 18:15:09.393 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:09.412 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.418 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:09.428 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.429 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:15:09.429 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RequestedScopes":["openid","profile","api1","offline_access"],"GrantedScopes":["openid","profile","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKGRAF1MRIG:0000000C","TimeStamp":"2019-02-12T11:15:09.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-12 18:15:09.443 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.443 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.462 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:15:09.463 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:15:09.463 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:15:09.463 +07:00 [DBG] Start authorize callback request
2019-02-12 18:15:09.464 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:15:09.464 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:15:09.488 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.488 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.488 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:15:09.489 +07:00 [DBG] No PKCE used.
2019-02-12 18:15:09.497 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:09.509 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.514 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:09.521 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.521 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:15:09.522 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","UiLocales":null,"Nonce":"636855668995179731.Mjg5MWM2NzQtNThlNi00MGM2LWE0ZjUtNWU3ZmQ1ODRlYjFkYzY0ZWVhMTItY2NiNC00MWE2LTk1NTYtOWYwNjYxNmQyYjEz","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1875252e963b8b8cd26f40ada83140a8","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855668995179731.Mjg5MWM2NzQtNThlNi00MGM2LWE0ZjUtNWU3ZmQ1ODRlYjFkYzY0ZWVhMTItY2NiNC00MWE2LTk1NTYtOWYwNjYxNmQyYjEz","state":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:15:09.525 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:15:09.526 +07:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:15:09.526 +07:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:15:09.526 +07:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:15:09.531 +07:00 [DBG] H+vfvAzXXuecKvZD1S1KSufvcfyjmSlN5SV22Z8lcho= found in database
2019-02-12 18:15:09.544 +07:00 [DBG] Creating Hybrid Flow response.
2019-02-12 18:15:09.545 +07:00 [DBG] s7aMWu+XqJ6cl0qxa0uHNZsFQkc4siZfagau2Atdf40= not found in database
2019-02-12 18:15:09.550 +07:00 [DBG] Creating Implicit Flow response.
2019-02-12 18:15:09.550 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:15:09.550 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:15:09.558 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****IggQ","$type":"Token"},{"TokenType":"code","TokenValue":"****409e","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRIG:0000000D","TimeStamp":"2019-02-12T11:15:09.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:15:09.558 +07:00 [INF] Authorize endpoint response
{"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8ARls4BL525HuATxHrUa136c0L2QQneoll8wtdUoNqZEmxbjlycNE5dmxQLAIoBeKCtyOQovGC5jUls1Vdl84a9Yr3Xe4TqNZIJ4B2GZjxQvyCVIS2-F4I2bxgU4bP8kkKatPHsArNcbR3YZYZXo8DIdjCAop_z02JzChoAe_Cx9CJ9zQh9UMifHkzoqVHbrhM45nviJfXFuJ6fTwCDlssI5uhQnLa3xlpCJOSaUCVUMhdDPL9zzfnVpHTWfOFnkYWjgs6K8ncTybk78zmYdk_eK8itRz3t5KPM2p4SF79ww_IG6IzmNseev__gjJIjX9mQ-ez5MfMV7XHWS9arbFFU","Scope":"openid profile api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-12 18:15:09.559 +07:00 [DBG] Augmenting SignInContext
2019-02-12 18:15:09.560 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-12 18:15:09.759 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 18:15:09.763 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 18:15:09.764 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 18:15:09.764 +07:00 [DBG] Start token request.
2019-02-12 18:15:09.764 +07:00 [DBG] Start client validation
2019-02-12 18:15:09.764 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 18:15:09.764 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 18:15:09.765 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 18:15:09.765 +07:00 [DBG] Secret id found: mvc
2019-02-12 18:15:09.793 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.793 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.793 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 18:15:09.793 +07:00 [DBG] Client validation success
2019-02-12 18:15:09.794 +07:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGRAF1MRIG:0000000E","TimeStamp":"2019-02-12T11:15:09.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 18:15:09.794 +07:00 [DBG] Start token request validation
2019-02-12 18:15:09.794 +07:00 [DBG] Start validation of authorization code token request
2019-02-12 18:15:09.797 +07:00 [DBG] s7aMWu+XqJ6cl0qxa0uHNZsFQkc4siZfagau2Atdf40= found in database: true
2019-02-12 18:15:09.802 +07:00 [DBG] removing s7aMWu+XqJ6cl0qxa0uHNZsFQkc4siZfagau2Atdf40= persisted grant from database
2019-02-12 18:15:09.812 +07:00 [DBG] Validation of authorization code token request success
2019-02-12 18:15:09.813 +07:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"037660e4616c98f060e9b30a1cef6c54928a06614ee3b15d70267e1de534409e","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"037660e4616c98f060e9b30a1cef6c54928a06614ee3b15d70267e1de534409e","grant_type":"authorization_code","redirect_uri":"http://localhost:5002/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-12 18:15:09.828 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.829 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.836 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:09.844 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.844 +07:00 [DBG] Getting claims for access token for client: mvc
2019-02-12 18:15:09.844 +07:00 [DBG] Getting claims for access token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:15:09.863 +07:00 [DBG] Creating refresh token
2019-02-12 18:15:09.864 +07:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-12 18:15:09.879 +07:00 [DBG] gg2K0+Z0J3Sj8FzNVUtoyaZniYdR5HkjuXvOzd3nwwk= not found in database
2019-02-12 18:15:09.894 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.894 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.902 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:09.916 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:15:09.917 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:15:09.917 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:15:09.925 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****h-aw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****ecec","$type":"Token"},{"TokenType":"access_token","TokenValue":"****HkgQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRIG:0000000E","TimeStamp":"2019-02-12T11:15:09.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:15:09.925 +07:00 [DBG] Token request success.
2019-02-12 18:15:09.942 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-12 18:15:09.943 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-12 18:15:09.944 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-12 18:15:09.944 +07:00 [DBG] Start userinfo request
2019-02-12 18:15:09.944 +07:00 [DBG] Bearer token found in header
2019-02-12 18:15:09.975 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.975 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.991 +07:00 [DBG] mvc found in database: true
2019-02-12 18:15:09.991 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:15:09.995 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:15:09.995 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549970109,"exp":1549973709,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"mvc","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549970106,"idp":"local","scope":["openid","profile","api1","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:15:09.995 +07:00 [DBG] Creating userinfo response
2019-02-12 18:15:09.996 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:15:09.996 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:15:10.009 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:10.010 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-12 18:15:10.011 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:15:10.016 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:15:10.025 +07:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-02-12 18:15:10.025 +07:00 [DBG] End userinfo request
2019-02-12 18:24:33.421 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-12 18:24:33.424 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-12 18:24:33.425 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-12 18:24:33.439 +07:00 [DBG] Start discovery request
2019-02-12 18:24:33.765 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-12 18:24:34.281 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-12 18:24:34.285 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-12 18:24:34.285 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-12 18:24:34.300 +07:00 [DBG] Start key discovery request
2019-02-12 18:24:34.572 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-12 18:24:34.577 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-12 18:24:34.577 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-12 18:24:34.578 +07:00 [DBG] Start authorize request
2019-02-12 18:24:34.579 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:24:34.579 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:24:34.704 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:34.704 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:34.705 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:24:34.705 +07:00 [DBG] No PKCE used.
2019-02-12 18:24:34.750 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:35.058 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:35.168 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:35.353 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:35.353 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:24:35.354 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa136t6fgNgDW9a1uOqo5oIE74WsPkY-LTKvioIG8N5wSd2wlWnLWzsySE6jxaSVKNEiVC9DqC77we_BwmmuBmwEchXlcyygubuepo4dfFWI1i-dIREUnJ_FgQCo8eODaWZhzDkneB13IDAXeTX5uudBD9s-6CX1jqzGM7ioDpIfDPOqsqLq2hoY28-cswzYFcqHcGsAZoI_ngBCw7erEfvdkrdLJpkL8Q3ak5qCAyVMkhgGX164mZtNBDXi1uT9wF3yTsa3dURdNhB9pkwDiDyczNnzqsFxvaRWnp-QwauLQBzgpZpJvVrq_AugQCViH10dI","UiLocales":null,"Nonce":"636855674744551998.MzI0NjE1MzUtMDdhZi00MjhjLTg5YTUtZGViYmNkNmEzMjZhODdkMmJiYzYtODJmZi00NzU0LWFkNTctODdkNTg4NTk0Y2Y1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1875252e963b8b8cd26f40ada83140a8","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855674744551998.MzI0NjE1MzUtMDdhZi00MjhjLTg5YTUtZGViYmNkNmEzMjZhODdkMmJiYzYtODJmZi00NzU0LWFkNTctODdkNTg4NTk0Y2Y1","state":"CfDJ8ARls4BL525HuATxHrUa136t6fgNgDW9a1uOqo5oIE74WsPkY-LTKvioIG8N5wSd2wlWnLWzsySE6jxaSVKNEiVC9DqC77we_BwmmuBmwEchXlcyygubuepo4dfFWI1i-dIREUnJ_FgQCo8eODaWZhzDkneB13IDAXeTX5uudBD9s-6CX1jqzGM7ioDpIfDPOqsqLq2hoY28-cswzYFcqHcGsAZoI_ngBCw7erEfvdkrdLJpkL8Q3ak5qCAyVMkhgGX164mZtNBDXi1uT9wF3yTsa3dURdNhB9pkwDiDyczNnzqsFxvaRWnp-QwauLQBzgpZpJvVrq_AugQCViH10dI","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:24:35.385 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:24:35.385 +07:00 [INF] Showing consent: User has not yet consented
2019-02-12 18:24:35.448 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:24:35.479 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:35.479 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:35.479 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:24:35.479 +07:00 [DBG] No PKCE used.
2019-02-12 18:24:35.505 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:35.532 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:35.538 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:35.557 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:35.558 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:24:35.584 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:35.584 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:35.607 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:35.872 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:41.193 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:24:41.212 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:41.212 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:41.213 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:24:41.213 +07:00 [DBG] No PKCE used.
2019-02-12 18:24:41.217 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:41.227 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:41.231 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:41.274 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:41.275 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:24:41.276 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RequestedScopes":["openid","profile","api1","offline_access"],"GrantedScopes":["openid","profile","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKGRAF1MRIH:00000005","TimeStamp":"2019-02-12T11:24:41.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-12 18:24:41.316 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:41.316 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:41.399 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-12 18:24:41.401 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-12 18:24:41.401 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-12 18:24:41.401 +07:00 [DBG] Start authorize callback request
2019-02-12 18:24:41.403 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:24:41.404 +07:00 [DBG] Start authorize request protocol validation
2019-02-12 18:24:41.480 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:41.481 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:41.481 +07:00 [DBG] Checking for PKCE parameters
2019-02-12 18:24:41.481 +07:00 [DBG] No PKCE used.
2019-02-12 18:24:41.505 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:41.525 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:41.536 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:41.585 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:41.585 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-12 18:24:41.586 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa136t6fgNgDW9a1uOqo5oIE74WsPkY-LTKvioIG8N5wSd2wlWnLWzsySE6jxaSVKNEiVC9DqC77we_BwmmuBmwEchXlcyygubuepo4dfFWI1i-dIREUnJ_FgQCo8eODaWZhzDkneB13IDAXeTX5uudBD9s-6CX1jqzGM7ioDpIfDPOqsqLq2hoY28-cswzYFcqHcGsAZoI_ngBCw7erEfvdkrdLJpkL8Q3ak5qCAyVMkhgGX164mZtNBDXi1uT9wF3yTsa3dURdNhB9pkwDiDyczNnzqsFxvaRWnp-QwauLQBzgpZpJvVrq_AugQCViH10dI","UiLocales":null,"Nonce":"636855674744551998.MzI0NjE1MzUtMDdhZi00MjhjLTg5YTUtZGViYmNkNmEzMjZhODdkMmJiYzYtODJmZi00NzU0LWFkNTctODdkNTg4NTk0Y2Y1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1875252e963b8b8cd26f40ada83140a8","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636855674744551998.MzI0NjE1MzUtMDdhZi00MjhjLTg5YTUtZGViYmNkNmEzMjZhODdkMmJiYzYtODJmZi00NzU0LWFkNTctODdkNTg4NTk0Y2Y1","state":"CfDJ8ARls4BL525HuATxHrUa136t6fgNgDW9a1uOqo5oIE74WsPkY-LTKvioIG8N5wSd2wlWnLWzsySE6jxaSVKNEiVC9DqC77we_BwmmuBmwEchXlcyygubuepo4dfFWI1i-dIREUnJ_FgQCo8eODaWZhzDkneB13IDAXeTX5uudBD9s-6CX1jqzGM7ioDpIfDPOqsqLq2hoY28-cswzYFcqHcGsAZoI_ngBCw7erEfvdkrdLJpkL8Q3ak5qCAyVMkhgGX164mZtNBDXi1uT9wF3yTsa3dURdNhB9pkwDiDyczNnzqsFxvaRWnp-QwauLQBzgpZpJvVrq_AugQCViH10dI","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-12 18:24:41.605 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-12 18:24:41.605 +07:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:24:41.605 +07:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2019-02-12 18:24:41.606 +07:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:24:41.622 +07:00 [DBG] H+vfvAzXXuecKvZD1S1KSufvcfyjmSlN5SV22Z8lcho= found in database
2019-02-12 18:24:41.643 +07:00 [DBG] Creating Hybrid Flow response.
2019-02-12 18:24:41.646 +07:00 [DBG] zfAh6fMHMVykl1oD5hO2SrSdeJnY5CiQwCk6insgYow= not found in database
2019-02-12 18:24:41.678 +07:00 [DBG] Creating Implicit Flow response.
2019-02-12 18:24:41.679 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:24:41.679 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:24:41.690 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****EZBg","$type":"Token"},{"TokenType":"code","TokenValue":"****b6e5","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRIH:00000006","TimeStamp":"2019-02-12T11:24:41.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:24:41.690 +07:00 [INF] Authorize endpoint response
{"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8ARls4BL525HuATxHrUa136t6fgNgDW9a1uOqo5oIE74WsPkY-LTKvioIG8N5wSd2wlWnLWzsySE6jxaSVKNEiVC9DqC77we_BwmmuBmwEchXlcyygubuepo4dfFWI1i-dIREUnJ_FgQCo8eODaWZhzDkneB13IDAXeTX5uudBD9s-6CX1jqzGM7ioDpIfDPOqsqLq2hoY28-cswzYFcqHcGsAZoI_ngBCw7erEfvdkrdLJpkL8Q3ak5qCAyVMkhgGX164mZtNBDXi1uT9wF3yTsa3dURdNhB9pkwDiDyczNnzqsFxvaRWnp-QwauLQBzgpZpJvVrq_AugQCViH10dI","Scope":"openid profile api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-12 18:24:42.632 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-12 18:24:42.634 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-12 18:24:42.635 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-12 18:24:42.635 +07:00 [DBG] Start token request.
2019-02-12 18:24:42.635 +07:00 [DBG] Start client validation
2019-02-12 18:24:42.635 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-12 18:24:42.635 +07:00 [DBG] Start parsing for secret in post body
2019-02-12 18:24:42.635 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-12 18:24:42.635 +07:00 [DBG] Secret id found: mvc
2019-02-12 18:24:42.706 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:42.707 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:42.707 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-12 18:24:42.707 +07:00 [DBG] Client validation success
2019-02-12 18:24:42.707 +07:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKGRAF1MRIH:00000007","TimeStamp":"2019-02-12T11:24:42.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-12 18:24:42.707 +07:00 [DBG] Start token request validation
2019-02-12 18:24:42.707 +07:00 [DBG] Start validation of authorization code token request
2019-02-12 18:24:42.731 +07:00 [DBG] zfAh6fMHMVykl1oD5hO2SrSdeJnY5CiQwCk6insgYow= found in database: true
2019-02-12 18:24:42.743 +07:00 [DBG] removing zfAh6fMHMVykl1oD5hO2SrSdeJnY5CiQwCk6insgYow= persisted grant from database
2019-02-12 18:24:42.780 +07:00 [DBG] Validation of authorization code token request success
2019-02-12 18:24:42.781 +07:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"77d7c5bfb9fc455038da2f69ed358cf74b0f4649bff58bb18c6433d8aeedb6e5","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"77d7c5bfb9fc455038da2f69ed358cf74b0f4649bff58bb18c6433d8aeedb6e5","grant_type":"authorization_code","redirect_uri":"http://localhost:5002/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-12 18:24:42.806 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:42.806 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:42.814 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:42.828 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:42.828 +07:00 [DBG] Getting claims for access token for client: mvc
2019-02-12 18:24:42.829 +07:00 [DBG] Getting claims for access token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:24:42.855 +07:00 [DBG] Creating refresh token
2019-02-12 18:24:42.855 +07:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-12 18:24:42.862 +07:00 [DBG] YpaJhdDfrTHgRASDVYd+bvrdDpctyFB0iy0x+0nutEI= not found in database
2019-02-12 18:24:42.880 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:42.881 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:42.891 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:42.900 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-12 18:24:42.901 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-12 18:24:42.901 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-12 18:24:42.914 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****hgYw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****60b3","$type":"Token"},{"TokenType":"access_token","TokenValue":"****46yw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKGRAF1MRIH:00000007","TimeStamp":"2019-02-12T11:24:42.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-12 18:24:42.915 +07:00 [DBG] Token request success.
2019-02-12 18:24:43.014 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-12 18:24:43.014 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-12 18:24:43.015 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-12 18:24:43.015 +07:00 [DBG] Start userinfo request
2019-02-12 18:24:43.015 +07:00 [DBG] Bearer token found in header
2019-02-12 18:24:43.047 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:43.047 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:43.063 +07:00 [DBG] mvc found in database: true
2019-02-12 18:24:43.063 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:24:43.068 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:24:43.068 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549970682,"exp":1549974282,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"mvc","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549970106,"idp":"local","scope":["openid","profile","api1","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:24:43.068 +07:00 [DBG] Creating userinfo response
2019-02-12 18:24:43.069 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:24:43.069 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:24:43.080 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:43.080 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-12 18:24:43.080 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-12 18:24:43.088 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-12 18:24:43.107 +07:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-02-12 18:24:43.108 +07:00 [DBG] End userinfo request
2019-02-12 18:25:23.660 +07:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2019-02-12 18:25:23.662 +07:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2019-02-12 18:25:23.662 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2019-02-12 18:25:23.662 +07:00 [DBG] Processing signout request for afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-12 18:25:23.662 +07:00 [DBG] Start end session request validation
2019-02-12 18:25:23.663 +07:00 [DBG] Start identity token validation
2019-02-12 18:25:23.687 +07:00 [DBG] mvc found in database: true
2019-02-12 18:25:23.687 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:25:23.687 +07:00 [DBG] Client found: mvc / MVC Client
2019-02-12 18:25:23.694 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-12 18:25:23.695 +07:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1549970682,"exp":1549970982,"iss":"http://localhost:5000","aud":"mvc","nonce":"636855674744551998.MzI0NjE1MzUtMDdhZi00MjhjLTg5YTUtZGViYmNkNmEzMjZhODdkMmJiYzYtODJmZi00NzU0LWFkNTctODdkNTg4NTk0Y2Y1","iat":1549970682,"at_hash":"V-Xt2M968TMh_qd98Ok3Sg","sid":"1875252e963b8b8cd26f40ada83140a8","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1549970106,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-12 18:25:23.696 +07:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","PostLogOutUri":"http://localhost:5002/signout-callback-oidc","State":"CfDJ8ARls4BL525HuATxHrUa137XI9oI4ST3xuEIcgLiF96tB4_sckjQUvry8ox4t7Y0ct2S2dXGwaACEhLACQKVCvFJjptnSi_5UHnvTnQjXKQ32VZKeRwuQ3XkQExhjtMtFOh-eUO9vLWJUX6JJT5CokkWUwalRdIQwLdXFK3F1yGs","Raw":{"post_logout_redirect_uri":"http://localhost:5002/signout-callback-oidc","id_token_hint":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjU2OTQxNjhlNWUxMDQ1ZTNmYjVkYWE2YjY1OWRhMWVlIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDk5NzA2ODIsImV4cCI6MTU0OTk3MDk4MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoibXZjIiwibm9uY2UiOiI2MzY4NTU2NzQ3NDQ1NTE5OTguTXpJME5qRTFNelV0TURkaFppMDBNamhqTFRnNVlUVXRaR1ZpWW1Oa05tRXpNalpoT0Rka01tSmlZell0T0RKbVppMDBOelUwTFdGa05UY3RPRGRrTlRnNE5UazBZMlkxIiwiaWF0IjoxNTQ5OTcwNjgyLCJhdF9oYXNoIjoiVi1YdDJNOTY4VE1oX3FkOThPazNTZyIsInNpZCI6IjE4NzUyNTJlOTYzYjhiOGNkMjZmNDBhZGE4MzE0MGE4Iiwic3ViIjoiYWZhYTNkMDItMTFmZC00MjJkLTg4MjMtZTRiMmZlMzdiZmU0IiwiYXV0aF90aW1lIjoxNTQ5OTcwMTA2LCJpZHAiOiJsb2NhbCIsImFtciI6WyJwd2QiXX0.sJTAcJMYSjboEm--j59ErPX9kqsWdwMDlNJmft36meyOJZ6He0QmzaYitJ88DNKg4TLcVOYDGvXFjgygd_T-z7lYDgl9M7C5tyrxpJ1zoAseMgHL6_vOF7CzYm8Uqtg745Q8lsF8H5TuphWlG-lPv5R_aEVv2ge7Brxk4G9pkuFkn1uSvJJMYTsKskKvgwyM55y5cOQz7WucB_TbkNIcYQNvIU5ctmVgOiCuqetDwhQ1g9Atpfb6BTwTDIZa61DWopcoZ-bvD81NWDCq7zV8UBnvdHKua7iUTQj6lQ5QJfRzNsFSVqzlrKYahWbDhislNbx3LMyJd5p9snmL-_hgYw","state":"CfDJ8ARls4BL525HuATxHrUa137XI9oI4ST3xuEIcgLiF96tB4_sckjQUvry8ox4t7Y0ct2S2dXGwaACEhLACQKVCvFJjptnSi_5UHnvTnQjXKQ32VZKeRwuQ3XkQExhjtMtFOh-eUO9vLWJUX6JJT5CokkWUwalRdIQwLdXFK3F1yGs","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"EndSessionRequestValidationLog"}
2019-02-12 18:25:23.696 +07:00 [DBG] Success validating end session request from mvc
2019-02-12 18:25:23.743 +07:00 [INF] AuthenticationScheme: Identity.Application signed out.
2019-02-12 18:25:23.744 +07:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-02-12 18:25:23.745 +07:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2019-02-12 18:25:23.745 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKGRAF1MRIH:0000000A","TimeStamp":"2019-02-12T11:25:23.0000000Z","ProcessId":28352,"LocalIpAddress":"127.0.0.1:4254","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-12 18:25:24.322 +07:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2019-02-12 18:25:24.325 +07:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2019-02-12 18:25:24.325 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2019-02-12 18:25:24.326 +07:00 [DBG] Processing signout callback request
2019-02-12 18:25:24.391 +07:00 [DBG] mvc found in database: true
2019-02-12 18:25:24.391 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-12 18:25:24.392 +07:00 [DBG] No client front-channel logout URLs
2019-02-12 18:25:24.392 +07:00 [DBG] No client back-channel logout URLs
2019-02-12 18:25:24.392 +07:00 [INF] Successful signout callback.
2019-02-12 18:25:24.392 +07:00 [DBG] No client front-channel iframe urls
2019-02-12 18:25:24.392 +07:00 [DBG] No client back-channel iframe urls
2019-02-12 18:41:13.679 +07:00 [DBG] Stopping grant removal
2019-02-12 18:41:13.684 +07:00 [DBG] TaskCanceledException. Exiting.
2019-02-13 08:34:18.412 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-13 08:34:18.952 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-13 08:34:18.953 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-13 08:34:18.953 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-13 08:34:18.953 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-13 08:34:18.953 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-13 08:34:18.953 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-13 08:34:19.211 +07:00 [DBG] Starting grant removal
2019-02-13 08:34:19.599 +07:00 [DBG] Login Url: /Account/Login
2019-02-13 08:34:19.604 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 08:34:19.604 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-13 08:34:19.604 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-13 08:34:19.604 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 08:34:19.604 +07:00 [DBG] Error Url: /home/error
2019-02-13 08:34:19.604 +07:00 [DBG] Error Id Parameter: errorId
2019-02-13 08:40:26.157 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-13 08:40:26.576 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-13 08:40:26.576 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-13 08:40:26.576 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-13 08:40:26.576 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-13 08:40:26.577 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-13 08:40:26.577 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-13 08:40:26.865 +07:00 [DBG] Starting grant removal
2019-02-13 08:40:27.366 +07:00 [DBG] Login Url: /Account/Login
2019-02-13 08:40:27.372 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 08:40:27.372 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-13 08:40:27.372 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-13 08:40:27.372 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 08:40:27.372 +07:00 [DBG] Error Url: /home/error
2019-02-13 08:40:27.372 +07:00 [DBG] Error Id Parameter: errorId
2019-02-13 08:40:27.437 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-13 08:40:27.484 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-13 08:40:27.484 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-13 08:40:27.493 +07:00 [DBG] Start discovery request
2019-02-13 08:40:31.373 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-13 08:40:31.736 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-13 08:40:31.738 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-13 08:40:31.738 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-13 08:40:31.750 +07:00 [DBG] Start key discovery request
2019-02-13 08:40:32.021 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-13 08:40:32.039 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-13 08:40:32.039 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-13 08:40:32.049 +07:00 [DBG] Start authorize request
2019-02-13 08:40:32.076 +07:00 [DBG] No user present in authorize request
2019-02-13 08:40:32.088 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 08:40:33.193 +07:00 [DBG] mvc found in database: true
2019-02-13 08:40:33.223 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 08:40:33.268 +07:00 [ERR] Invalid redirect_uri: https://localhost:44377/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile","response_mode":"form_post","nonce":"636856188318820120.ZDg0MTU4NzEtM2U1OC00YTIzLTlhOTMtYjcwMTZiYWQzN2MyMWE5NjU3NWYtNDg0MC00ODUyLTgzZGMtZmU5ZWZkOTEyY2Ey","state":"CfDJ8ARls4BL525HuATxHrUa136-5A_z4uwuxDYD0FONdtLCVUxvF0LrUhqXYZWGORuw3r0HKAB8movPrYYpf5xA9PaJDWKah3hSAh1gnf-LTzUInUZqaazEgWk50SWVZqXCeS_6FZjGGTV4VvMLaqoDVHDltZngISu8Vlf1a6OVSOTIieCrOMVCxDddnCiP7JOHmopBSYwoYfg0pybqnBt0tIp2liyxnaKdYKkv785KIXOUUkybVqsfcZinaN1T_vRZuQYVy7YYFf51MBQGwYukjcqcLR9zSK6zQzkeEjrLuCer2HVU2m-2TqwqFFrV8h_uJVRxtEhLQQhKZj2qOStpWyM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 08:40:42.951 +07:00 [ERR] Request validation failed
2019-02-13 08:40:42.952 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile","response_mode":"form_post","nonce":"636856188318820120.ZDg0MTU4NzEtM2U1OC00YTIzLTlhOTMtYjcwMTZiYWQzN2MyMWE5NjU3NWYtNDg0MC00ODUyLTgzZGMtZmU5ZWZkOTEyY2Ey","state":"CfDJ8ARls4BL525HuATxHrUa136-5A_z4uwuxDYD0FONdtLCVUxvF0LrUhqXYZWGORuw3r0HKAB8movPrYYpf5xA9PaJDWKah3hSAh1gnf-LTzUInUZqaazEgWk50SWVZqXCeS_6FZjGGTV4VvMLaqoDVHDltZngISu8Vlf1a6OVSOTIieCrOMVCxDddnCiP7JOHmopBSYwoYfg0pybqnBt0tIp2liyxnaKdYKkv785KIXOUUkybVqsfcZinaN1T_vRZuQYVy7YYFf51MBQGwYukjcqcLR9zSK6zQzkeEjrLuCer2HVU2m-2TqwqFFrV8h_uJVRxtEhLQQhKZj2qOStpWyM","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 08:40:42.975 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKHAGTDN8GM:00000003","TimeStamp":"2019-02-13T01:40:42.0000000Z","ProcessId":30976,"LocalIpAddress":"127.0.0.1:33423","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-13 08:41:42.141 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-13 08:41:42.514 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-13 08:41:42.514 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-13 08:41:42.514 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-13 08:41:42.514 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-13 08:41:42.514 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-13 08:41:42.514 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-13 08:41:42.817 +07:00 [DBG] Starting grant removal
2019-02-13 08:41:43.175 +07:00 [DBG] Login Url: /Account/Login
2019-02-13 08:41:43.180 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 08:41:43.181 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-13 08:41:43.181 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-13 08:41:43.182 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 08:41:43.182 +07:00 [DBG] Error Url: /home/error
2019-02-13 08:41:43.182 +07:00 [DBG] Error Id Parameter: errorId
2019-02-13 08:41:43.248 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-13 08:41:43.308 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-13 08:41:43.309 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-13 08:41:43.315 +07:00 [WRN] Invalid HTTP request for token endpoint
2019-02-13 08:42:03.972 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-13 08:42:03.979 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-13 08:42:03.979 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-13 08:42:03.993 +07:00 [DBG] Start authorize request
2019-02-13 08:42:04.042 +07:00 [DBG] No user present in authorize request
2019-02-13 08:42:04.074 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 08:42:08.979 +07:00 [DBG] mvc found in database: true
2019-02-13 08:42:09.056 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 08:42:09.165 +07:00 [ERR] Invalid redirect_uri: https://localhost:44377/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile","response_mode":"form_post","nonce":"636856189238742399.NDFmZmIyYzAtMGFjMC00MWIzLWIyYzUtY2QwYjE2NWUxZTc0MDgxYTViYTItYWQ3OS00NmY4LThjNjItNzBhY2U5MjQ4Nzgz","state":"CfDJ8ARls4BL525HuATxHrUa137GFnTT4x2Og6qRmcjswiGh4HPzTAdS0jk_SRhSzexLz-826Nvmq5ng9Igctl6Kd-TSi5NJPoGSuSmI1lca0WQ_LoEoM5viBFeFel5_S1Pb6X92t-CwjqchmWzqJWVyNg6op8M0ZGkc0MoQ1ftDrN39xIx3NWjuP0A34iZVgJqQJ5b_axM42t5TI_kqKaPKkVN0uGCJA-0AQQBJ0OPFlbHHzxoKNXOUKqGiAJsTUxuqzIF7vp4hSY5Is_QImR7tyATWzFi42e_dmbjMsLOaNPfU2yRaAJXOZg1fI31oINMVvf7gZqAXzUs-dldq4BFLWKo","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 08:42:09.255 +07:00 [ERR] Request validation failed
2019-02-13 08:42:09.255 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile","response_mode":"form_post","nonce":"636856189238742399.NDFmZmIyYzAtMGFjMC00MWIzLWIyYzUtY2QwYjE2NWUxZTc0MDgxYTViYTItYWQ3OS00NmY4LThjNjItNzBhY2U5MjQ4Nzgz","state":"CfDJ8ARls4BL525HuATxHrUa137GFnTT4x2Og6qRmcjswiGh4HPzTAdS0jk_SRhSzexLz-826Nvmq5ng9Igctl6Kd-TSi5NJPoGSuSmI1lca0WQ_LoEoM5viBFeFel5_S1Pb6X92t-CwjqchmWzqJWVyNg6op8M0ZGkc0MoQ1ftDrN39xIx3NWjuP0A34iZVgJqQJ5b_axM42t5TI_kqKaPKkVN0uGCJA-0AQQBJ0OPFlbHHzxoKNXOUKqGiAJsTUxuqzIF7vp4hSY5Is_QImR7tyATWzFi42e_dmbjMsLOaNPfU2yRaAJXOZg1fI31oINMVvf7gZqAXzUs-dldq4BFLWKo","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 08:42:09.319 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKHAHK11C8A:00000003","TimeStamp":"2019-02-13T01:42:09.0000000Z","ProcessId":20908,"LocalIpAddress":"127.0.0.1:19776","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-13 08:49:52.866 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-13 08:49:52.868 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-13 08:49:52.868 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-13 08:49:52.877 +07:00 [DBG] Start discovery request
2019-02-13 08:49:53.411 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-13 08:49:53.601 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-13 08:49:53.603 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-13 08:49:53.603 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-13 08:49:53.610 +07:00 [DBG] Start key discovery request
2019-02-13 08:49:53.720 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-13 08:49:53.722 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-13 08:49:53.722 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-13 08:49:53.722 +07:00 [DBG] Start authorize request
2019-02-13 08:49:53.722 +07:00 [DBG] No user present in authorize request
2019-02-13 08:49:53.722 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 08:49:53.823 +07:00 [DBG] mvc found in database: true
2019-02-13 08:49:53.824 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 08:49:53.824 +07:00 [ERR] Invalid redirect_uri: https://localhost:44377/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856193936787085.M2YxYTZmOWItZjkxZi00MWMyLTg3NWEtMmZiOTBjN2IwYzM3MTAwMjlkMWUtMjdjNi00NmE2LTk3YWEtY2MwMmI5OGJkOGVm","state":"CfDJ8ARls4BL525HuATxHrUa1377LO1RylGkF9d09s8JBXHcjxtkNIZ_YjE-klfRE5HC2yfJmxlq-ft9VbrN-fH0lzFzB8ZcVWB-SWr2E9gdLl5ZAM0ddKEwOTKm08j8uSA6RsZvzY6UaNmYKlQzc6AKdPBqMGuAH_m2eSCXpe1oiUCL2a_zva51n1ARNwvBBFhHn5Jk7kH1eFeK8qHA2sqXqpJQ4bX0LkY4e6mFbP2AKk8MFKPWiwERmTZuDAynp-csKLQINVxKJLl7LYkIKpNtns49_XtB0gMe0Yc9lewvVXk-vn14LKXaFBIQ78SaDqec1ltMTnpm3-lfwZ_VPUyqOdk","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 08:49:53.825 +07:00 [ERR] Request validation failed
2019-02-13 08:49:53.825 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856193936787085.M2YxYTZmOWItZjkxZi00MWMyLTg3NWEtMmZiOTBjN2IwYzM3MTAwMjlkMWUtMjdjNi00NmE2LTk3YWEtY2MwMmI5OGJkOGVm","state":"CfDJ8ARls4BL525HuATxHrUa1377LO1RylGkF9d09s8JBXHcjxtkNIZ_YjE-klfRE5HC2yfJmxlq-ft9VbrN-fH0lzFzB8ZcVWB-SWr2E9gdLl5ZAM0ddKEwOTKm08j8uSA6RsZvzY6UaNmYKlQzc6AKdPBqMGuAH_m2eSCXpe1oiUCL2a_zva51n1ARNwvBBFhHn5Jk7kH1eFeK8qHA2sqXqpJQ4bX0LkY4e6mFbP2AKk8MFKPWiwERmTZuDAynp-csKLQINVxKJLl7LYkIKpNtns49_XtB0gMe0Yc9lewvVXk-vn14LKXaFBIQ78SaDqec1ltMTnpm3-lfwZ_VPUyqOdk","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 08:49:53.825 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKHAHK11C8B:00000003","TimeStamp":"2019-02-13T01:49:53.0000000Z","ProcessId":20908,"LocalIpAddress":"127.0.0.1:19776","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-13 09:49:31.270 +07:00 [FTL] Application startup exception
System.InvalidOperationException: The ConfigureServices method must either be parameterless or take only one parameter of type IServiceCollection.
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureServicesBuilder.InvokeCore(Object instance, IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureServicesBuilder.<>c__DisplayClass9_0.<Invoke>g__Startup|0(IServiceCollection serviceCollection)
   at Microsoft.AspNetCore.Hosting.Internal.StartupLoader.ConfigureServicesDelegateBuilder`1.<>c__DisplayClass15_0.<BuildStartupServicesFilterPipeline>g__RunPipeline|0(IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureServicesBuilder.Invoke(Object instance, IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.Internal.ConfigureServicesBuilder.<>c__DisplayClass8_0.<Build>b__0(IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.Internal.StartupLoader.ConfigureServicesDelegateBuilder`1.<>c__DisplayClass14_0.<ConfigureServices>g__ConfigureServicesWithContainerConfiguration|0(IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.ConventionBasedStartup.ConfigureServices(IServiceCollection services)
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.EnsureApplicationServices()
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.Initialize()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Hosting.Internal.WebHost.BuildApplication()
2019-02-13 09:49:58.844 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-13 09:49:59.398 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-13 09:49:59.402 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-13 09:49:59.404 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-13 09:49:59.405 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-13 09:49:59.405 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-13 09:49:59.405 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-13 09:49:59.624 +07:00 [DBG] Starting grant removal
2019-02-13 09:50:00.215 +07:00 [DBG] Login Url: /Account/Login
2019-02-13 09:50:00.222 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 09:50:00.222 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-13 09:50:00.223 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-13 09:50:00.223 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 09:50:00.223 +07:00 [DBG] Error Url: /home/error
2019-02-13 09:50:00.223 +07:00 [DBG] Error Id Parameter: errorId
2019-02-13 09:50:03.343 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-13 09:50:03.374 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-13 09:50:03.375 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-13 09:50:03.381 +07:00 [DBG] Start discovery request
2019-02-13 09:50:05.766 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-13 09:50:11.857 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-13 09:50:11.864 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-13 09:50:11.865 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-13 09:50:11.878 +07:00 [DBG] Start authorize request
2019-02-13 09:50:11.914 +07:00 [DBG] No user present in authorize request
2019-02-13 09:50:11.937 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:50:12.756 +07:00 [DBG] mvc found in database: true
2019-02-13 09:50:12.770 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:50:12.796 +07:00 [ERR] Invalid redirect_uri: https://localhost:44377/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856230118105914.NDU1YWIzNDgtMmYzZi00YjFjLTg4NTMtZjljNmMxMGJhOTNmMTAyZTk5MTUtY2Y4ZC00YTQ1LWE1OTUtMWFjODkxOGE0MDQ5","state":"CfDJ8ARls4BL525HuATxHrUa1346G6_bO-wxAMtyg4iw6P04U11e6_9iM2D2rrmOiOKuXApZQLBy7TVLxJ9XFplDYP7s7j-ZclCalq88FBdcvGiWwFiVvE9FEDEZx-D8Q9F8kiF528c4Z0jFqvK3f2b3OGF28be_5YYBBJFjguZHqb9fMS6j20p0SvWbsoD6SwPKmJaV0VAqwinqZeRTLVGC-SmtY4V6McArKktdDOzMgRr-TvYbTs4BRsRCQPciZoUtXfuevINWkfwbg8KiqXEV54OZFRxPDmkWPVOdLOhjWtd0fW3f3PdtZBtuEEYyu1WxvXVHzXrYKz-1pcP28AJQHZs","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 09:50:12.810 +07:00 [ERR] Request validation failed
2019-02-13 09:50:12.811 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44377/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856230118105914.NDU1YWIzNDgtMmYzZi00YjFjLTg4NTMtZjljNmMxMGJhOTNmMTAyZTk5MTUtY2Y4ZC00YTQ1LWE1OTUtMWFjODkxOGE0MDQ5","state":"CfDJ8ARls4BL525HuATxHrUa1346G6_bO-wxAMtyg4iw6P04U11e6_9iM2D2rrmOiOKuXApZQLBy7TVLxJ9XFplDYP7s7j-ZclCalq88FBdcvGiWwFiVvE9FEDEZx-D8Q9F8kiF528c4Z0jFqvK3f2b3OGF28be_5YYBBJFjguZHqb9fMS6j20p0SvWbsoD6SwPKmJaV0VAqwinqZeRTLVGC-SmtY4V6McArKktdDOzMgRr-TvYbTs4BRsRCQPciZoUtXfuevINWkfwbg8KiqXEV54OZFRxPDmkWPVOdLOhjWtd0fW3f3PdtZBtuEEYyu1WxvXVHzXrYKz-1pcP28AJQHZs","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 09:50:12.827 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKHBNP08DH6:00000003","TimeStamp":"2019-02-13T02:50:12.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-13 09:51:16.270 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-13 09:51:16.272 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-13 09:51:16.272 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-13 09:51:16.272 +07:00 [DBG] Start discovery request
2019-02-13 09:51:16.360 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-13 09:51:16.534 +07:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-13 09:51:16.536 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-13 09:51:16.536 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-13 09:51:16.547 +07:00 [DBG] Start key discovery request
2019-02-13 09:51:16.673 +07:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-13 09:51:16.674 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-13 09:51:16.674 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-13 09:51:16.674 +07:00 [DBG] Start authorize request
2019-02-13 09:51:16.675 +07:00 [DBG] No user present in authorize request
2019-02-13 09:51:16.675 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:16.725 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:16.726 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:16.736 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:16.739 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:16.905 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:17.207 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:17.226 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:17.234 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:17.252 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:17.254 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","UiLocales":null,"Nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","state":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 09:51:17.271 +07:00 [INF] Showing login: User is not authenticated
2019-02-13 09:51:17.337 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:17.348 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:17.348 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:17.348 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:17.348 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:17.353 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:17.361 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:17.367 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:17.373 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:17.373 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:17.384 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:17.385 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:35.747 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:35.757 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:35.757 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:35.757 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:35.757 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:35.762 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:35.769 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:35.772 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:35.778 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:35.778 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:36.960 +07:00 [DBG] Augmenting SignInContext
2019-02-13 09:51:36.968 +07:00 [DBG] Adding idp claim with value: local
2019-02-13 09:51:36.968 +07:00 [DBG] Adding amr claim with value: pwd
2019-02-13 09:51:36.969 +07:00 [DBG] Adding auth_time claim with value: 1550026296
2019-02-13 09:51:36.995 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-13 09:51:37.007 +07:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKHBNP08DH7:00000005","TimeStamp":"2019-02-13T02:51:37.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-13 09:51:37.055 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:37.056 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:37.145 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-13 09:51:37.148 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-13 09:51:37.149 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-13 09:51:37.159 +07:00 [DBG] Start authorize callback request
2019-02-13 09:51:37.166 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-13 09:51:37.167 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:37.207 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:37.207 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:37.207 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:37.208 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:37.230 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:37.424 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:37.438 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:37.642 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:37.642 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:37.643 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","UiLocales":null,"Nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"46e7a5f5515fecfff39d908a0302557e","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","state":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 09:51:37.702 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-13 09:51:37.702 +07:00 [INF] Showing consent: User has not yet consented
2019-02-13 09:51:37.772 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:37.872 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:37.872 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:37.872 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:37.872 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:37.888 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:38.057 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:38.069 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:38.191 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:38.191 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:38.237 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:38.237 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:38.291 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:38.508 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:40.616 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:40.652 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:40.653 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:40.653 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:40.653 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:40.666 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:40.874 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:40.892 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:41.125 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:41.125 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:41.130 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RequestedScopes":["openid","profile","api1","offline_access"],"GrantedScopes":["openid","profile","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKHBNP08DH7:00000009","TimeStamp":"2019-02-13T02:51:41.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-13 09:51:41.202 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:41.202 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:41.224 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-13 09:51:41.225 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-13 09:51:41.225 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-13 09:51:41.225 +07:00 [DBG] Start authorize callback request
2019-02-13 09:51:41.234 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-13 09:51:41.234 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:41.381 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:41.381 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:41.381 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:41.381 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:41.400 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:41.626 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:41.638 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:41.780 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:41.780 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:41.780 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","UiLocales":null,"Nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"46e7a5f5515fecfff39d908a0302557e","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","state":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 09:51:41.787 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-13 09:51:41.797 +07:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2019-02-13 09:51:41.800 +07:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2019-02-13 09:51:41.806 +07:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-13 09:51:41.876 +07:00 [DBG] H+vfvAzXXuecKvZD1S1KSufvcfyjmSlN5SV22Z8lcho= found in database
2019-02-13 09:51:42.040 +07:00 [DBG] Creating Hybrid Flow response.
2019-02-13 09:51:42.070 +07:00 [DBG] JlBaVsw25FOJWj1EZYpPiXRCFk/INRqiHDQEdGDoVqo= not found in database
2019-02-13 09:51:42.087 +07:00 [DBG] Creating Implicit Flow response.
2019-02-13 09:51:42.103 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-13 09:51:42.107 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-13 09:51:42.270 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****wG3g","$type":"Token"},{"TokenType":"code","TokenValue":"****bc38","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKHBNP08DH7:0000000A","TimeStamp":"2019-02-13T02:51:42.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-13 09:51:42.280 +07:00 [INF] Authorize endpoint response
{"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","Scope":"openid profile api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-13 09:51:42.364 +07:00 [DBG] Augmenting SignInContext
2019-02-13 09:51:42.367 +07:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-13 09:51:42.798 +07:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-13 09:51:42.811 +07:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-13 09:51:42.811 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-13 09:51:42.833 +07:00 [DBG] Start token request.
2019-02-13 09:51:42.851 +07:00 [DBG] Start client validation
2019-02-13 09:51:42.868 +07:00 [DBG] Start parsing Basic Authentication secret
2019-02-13 09:51:42.880 +07:00 [DBG] Start parsing for secret in post body
2019-02-13 09:51:42.881 +07:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-13 09:51:42.881 +07:00 [DBG] Secret id found: mvc
2019-02-13 09:51:42.935 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:42.936 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:42.957 +07:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-13 09:51:42.958 +07:00 [DBG] Client validation success
2019-02-13 09:51:42.961 +07:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKHBNP08DH7:0000000B","TimeStamp":"2019-02-13T02:51:42.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-13 09:51:42.979 +07:00 [DBG] Start token request validation
2019-02-13 09:51:43.002 +07:00 [DBG] Start validation of authorization code token request
2019-02-13 09:51:43.039 +07:00 [DBG] JlBaVsw25FOJWj1EZYpPiXRCFk/INRqiHDQEdGDoVqo= found in database: true
2019-02-13 09:51:43.072 +07:00 [DBG] removing JlBaVsw25FOJWj1EZYpPiXRCFk/INRqiHDQEdGDoVqo= persisted grant from database
2019-02-13 09:51:43.089 +07:00 [DBG] Validation of authorization code token request success
2019-02-13 09:51:43.101 +07:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"7c6aa4fe967264487d7fcebf9a95620b21b13fd858932e3922ffa8d2928fbc38","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"7c6aa4fe967264487d7fcebf9a95620b21b13fd858932e3922ffa8d2928fbc38","grant_type":"authorization_code","redirect_uri":"http://localhost:5002/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-13 09:51:43.155 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:43.156 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:43.168 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:43.297 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:43.316 +07:00 [DBG] Getting claims for access token for client: mvc
2019-02-13 09:51:43.317 +07:00 [DBG] Getting claims for access token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-13 09:51:43.373 +07:00 [DBG] Creating refresh token
2019-02-13 09:51:43.374 +07:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-13 09:51:43.396 +07:00 [DBG] QFzjHL4SThyqIT+x7Igz4GHA9mqaA0yAjOb60FTnCEA= not found in database
2019-02-13 09:51:43.409 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:43.409 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:43.412 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:43.418 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:43.419 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-13 09:51:43.419 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-13 09:51:43.433 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****prpw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****ff0f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cpPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKHBNP08DH7:0000000B","TimeStamp":"2019-02-13T02:51:43.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-13 09:51:43.437 +07:00 [DBG] Token request success.
2019-02-13 09:51:43.470 +07:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-13 09:51:43.473 +07:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-13 09:51:43.473 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-13 09:51:43.489 +07:00 [DBG] Start userinfo request
2019-02-13 09:51:43.499 +07:00 [DBG] Bearer token found in header
2019-02-13 09:51:43.613 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:43.613 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:43.628 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:43.629 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:43.640 +07:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-13 09:51:43.645 +07:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550026303,"exp":1550029903,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"mvc","sub":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","auth_time":1550026296,"idp":"local","scope":["openid","profile","api1","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-13 09:51:43.663 +07:00 [DBG] Creating userinfo response
2019-02-13 09:51:43.672 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-13 09:51:43.680 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-13 09:51:43.691 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:43.693 +07:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-02-13 09:51:43.694 +07:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-02-13 09:51:43.697 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:43.707 +07:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-02-13 09:51:43.708 +07:00 [DBG] End userinfo request
2019-02-13 09:51:51.707 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:51.715 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:51.715 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:51.715 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:51.715 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:51.728 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:51.837 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:51.840 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:51.845 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:51.846 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:51.853 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:51.853 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:51.858 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:51.863 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:53.535 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:53.544 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:53.544 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:53.544 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:53.544 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:53.549 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:53.560 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:53.563 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:53.570 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:53.570 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:53.571 +07:00 [INF] {"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RequestedScopes":["openid","profile","api1","offline_access"],"GrantedScopes":["openid","profile","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKHBNP08DH7:0000000E","TimeStamp":"2019-02-13T02:51:53.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-13 09:51:53.579 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:53.579 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:53.595 +07:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-13 09:51:53.596 +07:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-13 09:51:53.596 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-13 09:51:53.596 +07:00 [DBG] Start authorize callback request
2019-02-13 09:51:53.597 +07:00 [DBG] User in authorize request: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-13 09:51:53.597 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:53.609 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:53.609 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:53.609 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:53.609 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:53.613 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:53.622 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:53.625 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:53.630 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:53.630 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:53.631 +07:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile api1 offline_access","State":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","UiLocales":null,"Nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"46e7a5f5515fecfff39d908a0302557e","Raw":{"client_id":"mvc","redirect_uri":"http://localhost:5002/signin-oidc","response_type":"code id_token","scope":"openid profile api1 offline_access","response_mode":"form_post","nonce":"636856230766361028.YjYzMThmOGYtOTM3OS00YmFlLTlmZGEtMmYxZjA3ZTBmM2ZhOTYwMzk3OTUtODlmZS00YTE1LTkyZjctNDlhOGM5MDMzY2Jm","state":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","x-client-SKU":"ID_NETSTANDARD1_4","x-client-ver":"5.2.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-13 09:51:53.634 +07:00 [DBG] Scopes contains offline_access, consent is required
2019-02-13 09:51:53.635 +07:00 [INF] User consented to scopes: ["openid","profile","api1","offline_access"]
2019-02-13 09:51:53.635 +07:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","api1","offline_access"]
2019-02-13 09:51:53.635 +07:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4
2019-02-13 09:51:53.637 +07:00 [DBG] H+vfvAzXXuecKvZD1S1KSufvcfyjmSlN5SV22Z8lcho= found in database
2019-02-13 09:51:53.639 +07:00 [DBG] Creating Hybrid Flow response.
2019-02-13 09:51:53.641 +07:00 [DBG] Hz7AitYbdJ0jOhlNBtCbelD/o2i7AOsjqdxcCoTqFy8= not found in database
2019-02-13 09:51:53.643 +07:00 [DBG] Creating Implicit Flow response.
2019-02-13 09:51:53.644 +07:00 [DBG] Getting claims for identity token for subject: afaa3d02-11fd-422d-8823-e4b2fe37bfe4 and client: mvc
2019-02-13 09:51:53.644 +07:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-13 09:51:53.651 +07:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost:5002/signin-oidc","Endpoint":"Authorize","SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","Scopes":"openid profile api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****mjuQ","$type":"Token"},{"TokenType":"code","TokenValue":"****f893","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKHBNP08DH7:0000000F","TimeStamp":"2019-02-13T02:51:53.0000000Z","ProcessId":7684,"LocalIpAddress":"127.0.0.1:31968","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-13 09:51:53.652 +07:00 [INF] Authorize endpoint response
{"SubjectId":"afaa3d02-11fd-422d-8823-e4b2fe37bfe4","ClientId":"mvc","RedirectUri":"http://localhost:5002/signin-oidc","State":"CfDJ8ARls4BL525HuATxHrUa135GkWaa6xb9RMlLjjHQ2vwFCA1tMQ1e9JiI9oe9K0nywuyE1qXbf6XEcW39EJtheddeurAep89ZcSfHOsP3xSwxcaNngtj8UdwJrJ9XEFhtDUVoMvhs7JJw5QwTb1PMoCT2Ez_SKZcpe3XPatY2IBUWkqbmsnZGQTtovDIdL2PQ0u06BBp6lf_KUFSeLCnFxYBmYaHQsUp-nau2QBg9KwTNv8Iq5A4xwINIUMFj9yNfjHOsxQZv5I_F6UwsiXPuLyop1ca2tRsRp-bgax46xoxIml2X84sDdkM_aobw5ivsue15l0BfWuzwc0xNRe7sOu8","Scope":"openid profile api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-13 09:51:55.813 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:55.825 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:55.825 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:55.825 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:55.826 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:55.830 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:55.840 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:55.843 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:55.850 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:55.850 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:55.861 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:55.862 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:55.865 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:55.872 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:57.121 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:51:57.132 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:57.133 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:51:57.133 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:51:57.133 +07:00 [DBG] No PKCE used.
2019-02-13 09:51:57.140 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:57.149 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:57.157 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:51:57.165 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:51:57.165 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:51:57.174 +07:00 [DBG] mvc found in database: true
2019-02-13 09:51:57.174 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:52:01.237 +07:00 [DBG] Start authorize request protocol validation
2019-02-13 09:52:01.248 +07:00 [DBG] mvc found in database: true
2019-02-13 09:52:01.248 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 09:52:01.248 +07:00 [DBG] Checking for PKCE parameters
2019-02-13 09:52:01.248 +07:00 [DBG] No PKCE used.
2019-02-13 09:52:01.251 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:52:01.258 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:52:01.262 +07:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-13 09:52:01.270 +07:00 [DBG] Found ["api1"] API scopes in database
2019-02-13 09:52:01.271 +07:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-13 09:52:01.278 +07:00 [DBG] mvc found in database: true
2019-02-13 09:52:01.278 +07:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-13 10:00:42.332 +07:00 [DBG] Stopping grant removal
2019-02-13 10:00:42.336 +07:00 [DBG] TaskCanceledException. Exiting.
2019-02-14 18:07:12.925 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-14 18:07:13.238 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-14 18:07:13.238 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-14 18:07:13.238 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-14 18:07:13.238 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-14 18:07:13.238 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-14 18:07:13.239 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-14 18:07:13.485 +07:00 [DBG] Starting grant removal
2019-02-14 18:07:14.017 +07:00 [DBG] Login Url: /Account/Login
2019-02-14 18:07:14.021 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-14 18:07:14.021 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-14 18:07:14.021 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-14 18:07:14.022 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-14 18:07:14.022 +07:00 [DBG] Error Url: /home/error
2019-02-14 18:07:14.022 +07:00 [DBG] Error Id Parameter: errorId
2019-02-14 18:07:14.040 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:14.068 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:16.364 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:16.365 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:16.376 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-14 18:07:16.403 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-14 18:07:16.404 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-14 18:07:16.412 +07:00 [DBG] Start discovery request
2019-02-14 18:07:18.707 +07:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-14 18:07:19.667 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:19.685 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:46.490 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:46.490 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:47.474 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:47.474 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:48.358 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:07:48.358 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:10:46.577 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-14 18:10:47.284 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-14 18:10:47.285 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-14 18:10:47.285 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-14 18:10:47.285 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-14 18:10:47.285 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-14 18:10:47.286 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-14 18:10:47.891 +07:00 [DBG] Starting grant removal
2019-02-14 18:10:48.837 +07:00 [DBG] Login Url: /Account/Login
2019-02-14 18:10:48.845 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-14 18:10:48.845 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-14 18:10:48.846 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-14 18:10:48.846 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-14 18:10:48.846 +07:00 [DBG] Error Url: /home/error
2019-02-14 18:10:48.846 +07:00 [DBG] Error Id Parameter: errorId
2019-02-14 18:10:48.884 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:10:48.945 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:12:42.092 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-14 18:12:42.401 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-14 18:12:42.404 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-14 18:12:42.404 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-14 18:12:42.404 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-14 18:12:42.405 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-14 18:12:42.405 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-14 18:12:42.741 +07:00 [DBG] Starting grant removal
2019-02-14 18:12:43.315 +07:00 [DBG] Login Url: /Account/Login
2019-02-14 18:12:43.320 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-14 18:12:43.320 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-14 18:12:43.320 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-14 18:12:43.320 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-14 18:12:43.321 +07:00 [DBG] Error Url: /home/error
2019-02-14 18:12:43.321 +07:00 [DBG] Error Id Parameter: errorId
2019-02-14 18:12:43.335 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-14 18:12:43.373 +07:00 [INF] Identity.Application was not authenticated. Failure message: Unprotect ticket failed
2019-02-16 09:49:27.367 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-16 09:49:27.723 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-16 09:49:27.723 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-16 09:49:27.723 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-16 09:49:27.724 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-16 09:49:27.724 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-16 09:49:27.724 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-16 09:49:27.902 +07:00 [DBG] Starting grant removal
2019-02-16 09:49:28.388 +07:00 [DBG] Login Url: /Account/Login
2019-02-16 09:49:28.392 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-16 09:49:28.392 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-16 09:49:28.392 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-16 09:49:28.393 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-16 09:49:28.393 +07:00 [DBG] Error Url: /home/error
2019-02-16 09:49:28.393 +07:00 [DBG] Error Id Parameter: errorId
2019-02-16 10:14:49.996 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-16 10:14:50.697 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-16 10:14:50.698 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-16 10:14:50.699 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-16 10:14:50.699 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-16 10:14:50.699 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-16 10:14:50.700 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-16 10:14:51.546 +07:00 [DBG] Starting grant removal
2019-02-16 10:14:52.743 +07:00 [DBG] Login Url: /Account/Login
2019-02-16 10:14:52.749 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-16 10:14:52.749 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-16 10:14:52.749 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-16 10:14:52.750 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-16 10:14:52.750 +07:00 [DBG] Error Url: /home/error
2019-02-16 10:14:52.750 +07:00 [DBG] Error Id Parameter: errorId
2019-02-16 10:23:19.014 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-16 10:23:19.560 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-16 10:23:19.561 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-16 10:23:19.562 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-16 10:23:19.562 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-16 10:23:19.562 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-16 10:23:19.562 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-16 10:23:20.273 +07:00 [DBG] Starting grant removal
2019-02-16 10:23:21.294 +07:00 [DBG] Login Url: /Account/Login
2019-02-16 10:23:21.300 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-16 10:23:21.300 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-16 10:23:21.300 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-16 10:23:21.300 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-16 10:23:21.301 +07:00 [DBG] Error Url: /home/error
2019-02-16 10:23:21.301 +07:00 [DBG] Error Id Parameter: errorId
2019-02-16 10:26:49.995 +07:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-02-16 10:26:50.384 +07:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-16 10:26:50.385 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-16 10:26:50.385 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-16 10:26:50.385 +07:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-16 10:26:50.385 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-16 10:26:50.385 +07:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-16 10:26:51.240 +07:00 [DBG] Starting grant removal
2019-02-16 10:26:51.794 +07:00 [DBG] Login Url: /Account/Login
2019-02-16 10:26:51.800 +07:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-16 10:26:51.800 +07:00 [DBG] Logout Url: /Account/Logout
2019-02-16 10:26:51.801 +07:00 [DBG] ConsentUrl Url: /consent
2019-02-16 10:26:51.801 +07:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-16 10:26:51.801 +07:00 [DBG] Error Url: /home/error
2019-02-16 10:26:51.801 +07:00 [DBG] Error Id Parameter: errorId
2019-02-16 10:27:05.193 +07:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-16 10:27:05.249 +07:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-16 10:27:05.249 +07:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-16 10:27:05.261 +07:00 [DBG] Start discovery request
